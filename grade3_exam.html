<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸‰å¹´çº§æœŸæœ«å¤§å†²åˆº - åŠ©åŠ›å®è´æ‹¿é«˜åˆ†</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        :root {
            --primary-color: #FF8A80;
            --secondary-color: #FFD54F;
            --success-color: #81C784;
            --bg-color: #FFF9F0;
            --card-shadow: 0 10px 20px rgba(0,0,0,0.05);
        }

        body {
            background-color: var(--bg-color);
            font-family: 'PingFang SC', 'zcool-gdt', system-ui, -apple-system, sans-serif;
            color: #4E342E;
            padding-bottom: 80px;
        }

        .header {
            background: linear-gradient(135deg, #FFAB91, #FF7043);
            color: white;
            padding: 2.5rem 0;
            text-align: center;
            border-bottom-left-radius: 60px;
            border-bottom-right-radius: 60px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(255, 112, 67, 0.3);
        }

        .nav-pills .nav-link {
            border-radius: 30px;
            padding: 12px 25px;
            font-weight: 600;
            color: #795548;
            transition: all 0.3s;
            background: white;
            margin: 5px;
            box-shadow: var(--card-shadow);
        }

        .nav-pills .nav-link.active {
            background-color: var(--primary-color);
            color: white;
            transform: scale(1.05);
        }

        .module-card {
            background: white;
            border-radius: 30px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            margin-bottom: 30px;
        }

        .question-text {
            font-size: 1.8rem;
            color: #D84315;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .word-block {
            background: #FFF3E0;
            padding: 10px 18px;
            border-radius: 15px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s;
            user-select: none;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .word-block:hover {
            border-color: var(--primary-color);
            background: #FFE0B2;
        }

        .composition-card {
            border-left: 8px solid #FF7043;
            background: #fff;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            line-height: 1.8;
            font-size: 1.1rem;
        }

        .poetry-card {
            background: #E8F5E9;
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            height: 100%;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            perspective: 1000px;
            transform-style: preserve-3d;
            min-height: 180px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .poetry-card.is-flipped {
            transform: rotateY(180deg);
            background: #F1F8E9;
        }

        .poetry-front, .poetry-back {
            backface-visibility: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .poetry-back {
            transform: rotateY(180deg);
            position: absolute;
            top: 0;
            left: 0;
            padding: 20px;
        }

        .poetry-content-full {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #1B5E20;
            word-break: break-all;
        }

        .score-badge {
            background: #FFD54F;
            color: #F57C00;
            padding: 8px 20px;
            border-radius: 30px;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .maruko-mascot {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            cursor: pointer;
            transition: all 0.3s;
        }

        .maruko-mascot:hover { transform: scale(1.1) rotate(-5deg); }

        .translation-option {
            border: 2px solid #FFE0B2;
            border-radius: 15px;
            padding: 12px;
            transition: all 0.2s;
            cursor: pointer;
            text-align: center;
        }

        .translation-option:hover {
            background-color: #FFF3E0;
            border-color: var(--primary-color);
        }

        .phonics-card {
            background: #F3E5F5;
            border-radius: 20px;
            padding: 15px;
            border: 2px solid #E1BEE7;
            transition: all 0.3s;
        }

        .phonics-letter {
            font-size: 2rem;
            color: #7B1FA2;
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }

        .phonics-sound {
            color: #9C27B0;
            font-style: italic;
            display: block;
            margin-bottom: 10px;
        }

        .phonics-word-item {
            background: white;
            border-radius: 12px;
            padding: 8px 12px;
            margin: 4px;
            display: inline-block;
            cursor: pointer;
            transition: transform 0.2s;
            font-size: 0.95rem;
        }

        .phonics-word-item:hover {
            transform: scale(1.1);
            background: #EDE7F6;
        }

        .min-vh-10 { min-height: 80px; }
        /* å¤šéŸ³å­—å¡ç‰‡ */
        .poly-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            height: 100%;
            transition: all 0.3s;
            border: 2px solid #E3F2FD;
            position: relative;
            overflow: hidden;
        }
        .poly-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            border-color: #2196F3;
        }
        .poly-char {
            font-size: 2.5rem;
            font-weight: bold;
            color: #1976D2;
            margin-bottom: 15px;
            display: block;
        }
        .poly-item {
            background: #F5F5F5;
            border-radius: 12px;
            padding: 10px;
            margin-bottom: 10px;
        }
        .poly-pinyin {
            color: #D32F2F;
            font-weight: bold;
            font-size: 1.1rem;
        }
        .poly-examples {
            font-size: 0.9rem;
            color: #616161;
        }

        /* å…³è”è¯å¡ç‰‡ */
        .conj-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            border-left: 5px solid #FF9800;
            margin-bottom: 20px;
            transition: all 0.3s;
        }
        .conj-card:hover {
            box-shadow: var(--card-shadow);
            transform: scale(1.01);
        }
        .conj-category {
            display: inline-block;
            background: #FFF3E0;
            color: #E65100;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .conj-pair {
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }
        .conj-sentence {
            background: #FAFAFA;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 8px;
            font-size: 0.95rem;
            cursor: pointer;
            transition: background 0.2s;
        }
        .conj-sentence:hover {
            background: #EEEEEE;
        }
        /* ç»ƒä¹ å®¹å™¨ */
        .exercise-container {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #FFFDE7;
            border-radius: 25px;
            border: 2px dashed #FBC02D;
        }
        .exercise-option {
            background: white;
            border: 2px solid #FFF176;
            border-radius: 15px;
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-block;
        }
        .exercise-option:hover {
            background: #FFF9C4;
            transform: scale(1.05);
        }
        .exercise-option.correct {
            background: #C8E6C9;
            border-color: #4CAF50;
            color: #2E7D32;
        }
        .exercise-option.wrong {
            background: #FFCDD2;
            border-color: #F44336;
            color: #C62828;
        }
        .exercise-sentence {
            font-size: 1.3rem;
            margin-bottom: 20px;
            line-height: 2;
        }
        .exercise-blank {
            display: inline-block;
            min-width: 80px;
            border-bottom: 2px solid #795548;
            margin: 0 10px;
            text-align: center;
            color: #D84315;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="header">
    <div class="container">
        <h1 class="display-4 fw-bold animate__animated animate__bounceIn">ğŸ’ ä¸‰å¹´çº§æœŸæœ«å¤‡è€ƒç‰¹è®­</h1>
        <p class="lead">è‹±è¯­ã€è¯­æ–‡ã€å¤è¯—ï¼Œå…¨ç§‘é€šå…³ï¼âœ¨</p>
        <div class="mt-3">
            <button class="btn btn-light rounded-pill px-4 shadow-sm" onclick="unlockAudio()">
                ğŸ”Š å¼€å¯å­¦ä¹ é…éŸ³
            </button>
        </div>
    </div>
</div>

<div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div class="score-badge shadow-sm">â­ å­¦ä¹ èƒ½é‡: <span id="user-score">0</span></div>
        <div class="fw-bold text-danger">ğŸ‘§ å®è´æœ€æ£’ï¼Œè€ƒè¯•åŠ æ²¹ï¼</div>
    </div>

    <ul class="nav nav-pills mb-4 justify-content-center sticky-top bg-transparent p-2" id="mainTabs">
        <li class="nav-item"><button class="nav-link active" data-bs-toggle="pill" data-bs-target="#english-zone">ğŸ”¤ è‹±è¯­å£è¯­</button></li>
        <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#phonics-zone">ğŸ—£ï¸ è¯­éŸ³è¾¾äºº</button></li>
        <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#poetry-zone">ğŸ® å¿…èƒŒå¤è¯—</button></li>
        <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#poly-zone">ğŸ”¤ å¤šéŸ³å­—</button></li>
        <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#conj-zone">ğŸ”— å…³è”è¯</button></li>
        <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#syn-zone">ğŸŒ“ è¿‘/åä¹‰è¯</button></li>
        <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#idiom-zone">ğŸ§  æˆè¯­æŒ‘æˆ˜</button></li>
    </ul>

    <div class="tab-content">
        <!-- è‹±è¯­æ¿å— -->
        <div class="tab-pane fade show active" id="english-zone">
            <div class="row justify-content-center">
                <div class="col-md-9">
                    <div class="module-card text-center animate__animated animate__fadeIn">
                        <div id="english-game-start">
                            <h3 class="mb-4">ğŸ¤ ä¸‰ä¸ŠæœŸæœ«å£è¯­ Q&A ç»ƒä¹  (28é¢˜)</h3>
                            <p class="text-muted mb-4">å…¨é¢è¦†ç›–æœŸæœ«å¿…è€ƒå¯¹è¯ï¼Œæ‹¼å›¾æŒ‘æˆ˜ï¼ŒåŠ æ·±è®°å¿†ï¼</p>
                            <button class="btn btn-primary btn-lg rounded-pill px-5" onclick="startEnglishChallenge()">å¼€å¯é—¯å…³</button>
                        </div>
                        <div id="english-game-play" style="display:none;">
                            <div class="progress mb-4" style="height: 10px; border-radius: 10px;">
                                <div id="english-progress" class="progress-bar bg-success" role="progressbar" style="width: 0%"></div>
                            </div>
                            <div class="question-text" id="current-question">Question?</div>
                            
                            <div id="translation-phase" class="mb-4">
                                <p class="fw-bold text-muted small mb-3">è¿™å¥è¯çš„æ„æ€æ˜¯ï¼š</p>
                                <div id="translation-options" class="d-grid gap-2"></div>
                            </div>

                            <div id="puzzle-phase" style="display:none;">
                                <div id="answer-display" class="p-3 border rounded-4 bg-light min-vh-10 mb-3 text-start d-flex flex-wrap gap-2 align-items-center">
                                    <p class="text-muted small m-0">è¯·æŒ‰é¡ºåºç‚¹å‡»å•è¯æ‹¼å‡ºç­”æ¡ˆ...</p>
                                </div>
                                <div id="word-pool" class="d-flex flex-wrap justify-content-center gap-2"></div>
                            </div>

                            <div class="mt-4" id="english-controls">
                                <button class="btn btn-info rounded-pill text-white px-4" onclick="hearQuestion()">ğŸ”Š å¬é—®é¢˜</button>
                                <button class="btn btn-warning rounded-pill text-white px-4" onclick="showHint()">ğŸ’¡ æç¤º</button>
                            </div>

                            <div id="english-result" class="mt-4 animate__animated" style="display:none;">
                                <h4 class="text-success fw-bold">å¤ªæ£’äº†ï¼æ‹¼å¯¹å•¦ï¼ğŸ‰</h4>
                                <p class="text-muted">è·Ÿæˆ‘è¯»ä¸€éï¼š</p>
                                <h3 id="correct-answer" class="text-primary p-3 bg-light rounded-4 border">Answer</h3>
                                <button class="btn btn-success rounded-pill px-5 mt-3" onclick="nextEnglishQuestion()">ä¸‹ä¸€é¢˜ âœ…</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- è¯­éŸ³è¾¾äººæ¿å— -->
        <div class="tab-pane fade" id="phonics-zone">
            <div class="row justify-content-center">
                <div class="col-md-10">
                    <div class="module-card">
                        <h3 class="mb-4 text-center">ğŸ—£ï¸ ä¸‰ä¸Š Phonics è¯­éŸ³é—¯å…³</h3>
                        <p class="text-muted text-center mb-4">è§‚å¯Ÿå•è¯ç»“æ„ï¼Œç»ƒä¹ è‡ªç„¶æ‹¼è¯»ï¼ŒæŒæ¡å­—æ¯å‘éŸ³è§„å¾‹ï¼</p>
                        <div id="phonics-container" class="row g-4"></div>
                    </div>
                </div>
            </div>
        </div>


        <!-- å¤è¯—æ¿å— -->
        <div class="tab-pane fade" id="poetry-zone">
            <div class="row">
                <div class="col-md-12">
                    <div class="module-card">
                        <h3 class="mb-4">ğŸ® å°å­¦ç”Ÿè¯¾æ ‡å¿…èƒŒå¤è¯—è¯ (ç²¾é€‰)</h3>
                        <p class="text-muted mb-4">ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹å…¨æ–‡å¹¶å¬æœ—è¯»ï¼ŒæŒ‘æˆ˜èƒŒè¯µå§ï¼</p>
                        <div class="row g-3" id="poetry-list"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å¤šéŸ³å­—æ¿å— -->
        <div class="tab-pane fade" id="poly-zone">
            <div class="row justify-content-center">
                <div class="col-md-10">
                    <div class="module-card">
                        <h3 class="mb-4 text-center">ğŸ”¤ å¤šéŸ³å­—è¶£å‘³æŒ‘æˆ˜</h3>
                        <p class="text-muted text-center mb-4">ä¸€ä¸ªå­—æœ‰å¤šç§è¯»éŸ³ï¼Œä½ èƒ½å…¨éƒ¨æŒæ¡å—ï¼Ÿç‚¹å‡»å‘éŸ³å¬ä¸€å¬ï¼</p>
                        <div class="text-center mb-4">
                            <button class="btn btn-warning rounded-pill px-4" onclick="startPolyExercise()">ğŸ¯ å¼€å§‹ç»ƒä¹ æ¨¡å¼</button>
                        </div>
                        <div id="poly-exercise" class="exercise-container text-center">
                            <div class="mb-3"><span class="badge bg-warning text-dark">ç»ƒä¹ ä¸­...</span></div>
                            <div class="exercise-sentence" id="poly-ex-sentence"></div>
                            <div id="poly-ex-options"></div>
                            <div class="mt-4">
                                <button class="btn btn-outline-secondary btn-sm" onclick="stopPolyExercise()">é€€å‡ºç»ƒä¹ </button>
                            </div>
                        </div>
                        <div id="poly-container" class="row g-4"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å…³è”è¯æ¿å— -->
        <div class="tab-pane fade" id="conj-zone">
            <div class="row justify-content-center">
                <div class="col-md-10">
                    <div class="module-card">
                        <h3 class="mb-4 text-center">ğŸ”— å…³è”è¯è¾¾äºº</h3>
                        <p class="text-muted text-center mb-4">æŒæ¡å¥å­é—´çš„é€»è¾‘å…³ç³»ï¼Œè®©è¡¨è¾¾æ›´æ¸…æ™°ï¼</p>
                        <div class="text-center mb-4">
                            <button class="btn btn-warning rounded-pill px-4" onclick="startConjExercise()">ğŸ¯ å¼€å§‹æŒ‘æˆ˜æ¨¡å¼</button>
                        </div>
                        <div id="conj-exercise" class="exercise-container text-center">
                            <div class="mb-3"><span class="badge bg-warning text-dark">æŒ‘æˆ˜ä¸­...</span></div>
                            <div class="exercise-sentence" id="conj-ex-sentence"></div>
                            <div id="conj-ex-options" class="d-flex flex-wrap justify-content-center"></div>
                            <div class="mt-4">
                                <button class="btn btn-outline-secondary btn-sm" onclick="stopConjExercise()">é€€å‡ºæŒ‘æˆ˜</button>
                            </div>
                        </div>
                        <div id="conj-container" class="row g-4"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- è¿‘/åä¹‰è¯æ¿å— -->
        <div class="tab-pane fade" id="syn-zone">
            <div class="row justify-content-center">
                <div class="col-md-10">
                    <div class="module-card">
                        <h3 class="mb-4 text-center">ğŸŒ“ è¿‘ä¹‰è¯ä¸åä¹‰è¯</h3>
                        <p class="text-muted text-center mb-4">ç§¯ç´¯è¯æ±‡é‡ï¼Œè®©å†™ä½œæ›´ç”ŸåŠ¨ï¼</p>
                        <div class="text-center mb-4">
                            <button class="btn btn-warning rounded-pill px-4" onclick="startSynExercise()">ğŸ¯ è¯æ±‡å¤§è€ƒéªŒ</button>
                        </div>
                        <div id="syn-exercise" class="exercise-container text-center">
                            <div class="mb-3"><span class="badge bg-warning text-dark">è€ƒéªŒä¸­...</span></div>
                            <div class="exercise-sentence" id="syn-ex-sentence"></div>
                            <div id="syn-ex-options" class="d-flex flex-wrap justify-content-center"></div>
                            <div class="mt-4">
                                <button class="btn btn-outline-secondary btn-sm" onclick="stopSynExercise()">é€€å‡ºè€ƒéªŒ</button>
                            </div>
                        </div>
                        <div id="syn-container" class="row g-4"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æˆè¯­æ¿å— -->
        <div class="tab-pane fade" id="idiom-zone">
            <div class="row justify-content-center">
                <div class="col-md-10">
                    <div class="module-card">
                        <h3 class="mb-4 text-center">ğŸ§  æˆè¯­å¤§é—¯å…³</h3>
                        <p class="text-muted text-center mb-4">å­¦å¥½æˆè¯­ï¼Œå‡ºå£æˆç« ï¼</p>
                        <div class="text-center mb-4">
                            <button class="btn btn-warning rounded-pill px-4" onclick="startIdiomChallenge()">ğŸ¯ æ™ºæ…§å¤§æŒ‘æˆ˜</button>
                        </div>
                        <div id="idiom-exercise" class="exercise-container text-center">
                            <div class="mb-3"><span class="badge bg-warning text-dark">æŒ‘æˆ˜ä¸­...</span></div>
                            <div class="exercise-sentence" id="idiom-ex-sentence"></div>
                            <div id="idiom-ex-options" class="d-flex flex-wrap justify-content-center"></div>
                            <div class="mt-4">
                                <button class="btn btn-outline-secondary btn-sm" onclick="stopIdiomChallenge()">é€€å‡ºæŒ‘æˆ˜</button>
                            </div>
                        </div>
                        <div id="idiom-container" class="row g-4"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="maruko-mascot animate__animated animate__bounceIn" onclick="marukoTalk()">
    <img src="https://img.icons8.com/color/96/anime.png" alt="Maruko">
</div>

<audio id="sfx-correct" src="https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3"></audio>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // --- å®Œæ•´è‹±è¯­ Q&A æ•°æ® (28é¢˜) ---
    const englishQuestions = [
        {q: "Good morning.", a: "Good morning.", cn: "æ—©ä¸Šå¥½ã€‚"},
        {q: "What's your name?", a: "My name is Lily.", cn: "ä½ å«ä»€ä¹ˆåå­—ï¼Ÿ"},
        {q: "How old are you?", a: "I'm nine years old.", cn: "ä½ å‡ å²äº†ï¼Ÿ"},
        {q: "Nice to meet you.", a: "Nice to meet you too.", cn: "å¾ˆé«˜å…´è®¤è¯†ä½ ã€‚"},
        {q: "Do you have a pet?", a: "Yes, I do.", cn: "ä½ æœ‰å® ç‰©å—ï¼Ÿ"},
        {q: "What color is it?", a: "It is red.", cn: "å®ƒæ˜¯ä»€ä¹ˆé¢œè‰²çš„ï¼Ÿ"},
        {q: "Let's go to the zoo.", a: "Great idea.", cn: "æˆ‘ä»¬å»åŠ¨ç‰©å›­å§ã€‚"},
        {q: "How many apples do you have?", a: "I have five apples.", cn: "ä½ æœ‰å¤šå°‘ä¸ªè‹¹æœï¼Ÿ"},
        {q: "Happy birthday!", a: "Thank you!", cn: "ç”Ÿæ—¥å¿«ä¹ï¼"},
        {q: "What do plants need?", a: "Plants need water and sun.", cn: "æ¤ç‰©éœ€è¦ä»€ä¹ˆï¼Ÿ"},
        {q: "What color is your dog?", a: "It is black and white.", cn: "ä½ çš„ç‹—æ˜¯ä»€ä¹ˆé¢œè‰²çš„ï¼Ÿ"},
        {q: "Is this your photo?", a: "Yes, it is.", cn: "è¿™æ˜¯ä½ çš„ç…§ç‰‡å—ï¼Ÿ"},
        {q: "What colours make green?", a: "Blue and yellow make green.", cn: "ä»€ä¹ˆé¢œè‰²æ··åˆèƒ½å˜æˆç»¿è‰²ï¼Ÿ"},
        {q: "What colours do you like?", a: "I like red and pink.", cn: "ä½ å–œæ¬¢ä»€ä¹ˆé¢œè‰²ï¼Ÿ"},
        {q: "Do you have a big family?", a: "Yes, I do.", cn: "ä½ æœ‰ä¸€ä¸ªå¤§å®¶åº­å—ï¼Ÿ"},
        {q: "What can plants give us?", a: "Plants can give us fresh air.", cn: "æ¤ç‰©èƒ½ç»™æˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆï¼Ÿ"},
        {q: "Are you a good friend?", a: "Yes, I am. I help others.", cn: "ä½ æ˜¯ä¸€ä¸ªå¥½æœ‹å‹å—ï¼Ÿ"},
        {q: "What's that?", a: "It's a tiger.", cn: "é‚£æ˜¯ä»€ä¹ˆï¼Ÿ"},
        {q: "How many tigers do you see?", a: "I see three tigers.", cn: "ä½ çœ‹åˆ°äº†å‡ åªè€è™ï¼Ÿ"},
        {q: "What colours make purple?", a: "Red and blue make purple.", cn: "ä»€ä¹ˆé¢œè‰²æ··åˆèƒ½å˜æˆç´«è‰²ï¼Ÿ"},
        {q: "What colours make orange?", a: "Red and yellow make orange.", cn: "ä»€ä¹ˆé¢œè‰²æ··åˆèƒ½å˜æˆæ©™è‰²ï¼Ÿ"},
        {q: "What colours make pink?", a: "Red and white make pink.", cn: "ä»€ä¹ˆé¢œè‰²æ··åˆèƒ½å˜æˆç²‰è‰²ï¼Ÿ"},
        {q: "What colours make gray?", a: "Black and white make gray.", cn: "ä»€ä¹ˆé¢œè‰²æ··åˆèƒ½å˜æˆç°è‰²ï¼Ÿ"},
        {q: "Your dog is very cute!", a: "Thank you!", cn: "ä½ çš„ç‹—çœŸå¯çˆ±ï¼"},
        {q: "We can share.", a: "Thank you.", cn: "æˆ‘ä»¬å¯ä»¥åˆ†äº«ã€‚"},
        {q: "Is that your brother?", a: "No, it isn't.", cn: "é‚£æ˜¯ä½ å¼Ÿå¼Ÿå—ï¼Ÿ"},
        {q: "What do friends do?", a: "Friends help and share.", cn: "æœ‹å‹ä¹‹é—´ä¼šåšä»€ä¹ˆï¼Ÿ"},
        {q: "What colour is the grass?", a: "It is green.", cn: "è‰æ˜¯ä»€ä¹ˆé¢œè‰²çš„ï¼Ÿ"}
    ];

    // --- å¤šéŸ³å­—æ•°æ® ---
    const polyData = [
        {"char": "è½", "pronunciations": [{"pinyin": "lÃ ", "examples": ["è½äº†ä¸¤ä¸ªå­—", "è½åœ¨å®¶é‡Œ", "è½åœ¨åé¢"]}, {"pinyin": "luÃ²", "examples": ["è½æ³ª", "è½å¹•", "æ²¡è½", "ç ´è½", "è½æ¦œ", "è½æˆ", "è½åœ°", "è½ç¬¬"]}]},
        {"char": "ç©º", "pronunciations": [{"pinyin": "kÅng", "examples": ["ç©ºæƒ³", "å¤©ç©º", "è½ç©º", "ç©ºè¡è¡", "ç©ºæ—·"]}, {"pinyin": "kÃ²ng", "examples": ["ç©ºæ ¼", "ç©ºç™½", "ç©ºåœ°", "å¡«ç©º", "æŠ½ç©º", "ç©ºé—²"]}]},
        {"char": "å£³", "pronunciations": [{"pinyin": "kÃ©", "examples": ["è´å£³", "è„‘å£³", "é¸¡è›‹å£³"]}, {"pinyin": "qiÃ o", "examples": ["åœ°å£³", "ç”²å£³", "é‡‘è‰è„±å£³"]}]},
        {"char": "çœ‹", "pronunciations": [{"pinyin": "kÄn", "examples": ["çœ‹é—¨", "çœ‹ç®¡", "çœ‹æŠ¤", "çœ‹å®ˆ"]}, {"pinyin": "kÃ n", "examples": ["çœ‹ä¹¦", "ä½ çœ‹", "çœ‹æœ›", "çœ‹è§", "ç…§çœ‹"]}]},
        {"char": "å¡", "pronunciations": [{"pinyin": "kÇ", "examples": ["å¡ç‰‡", "å¡è½¦", "å¡é€š", "ç—…å†å¡"]}, {"pinyin": "qiÇ", "examples": ["é±¼åˆºå¡åœ¨å–‰å’™å¤´", "å¡ä½é€€è·¯", "å¡è„–å­", "å‘å¡", "å…³å¡"]}]},
        {"char": "è§‰", "pronunciations": [{"pinyin": "juÃ©", "examples": ["æ„Ÿè§‰", "è§‰æ‚Ÿ", "è§‰å¾—", "è§‰å¯Ÿ", "è§‰é†’"]}, {"pinyin": "jiÃ o", "examples": ["ç¡è§‰", "åˆè§‰"]}]},
        {"char": "åœˆ", "pronunciations": [{"pinyin": "juÃ n", "examples": ["çŒªåœˆ", "ç¾Šåœˆ", "åœˆå…»"]}, {"pinyin": "quÄn", "examples": ["åœˆå­", "é¡¹åœˆ", "åœˆåœ°", "åœˆå‡ºæ¥", "åœˆå¥—"]}]},
        {"char": "ç¦", "pronunciations": [{"pinyin": "jÄ«n", "examples": ["ç¦å—", "å¼±ä¸ç¦é£", "ä¸ç¦", "æƒ…ä¸è‡ªç¦"]}, {"pinyin": "jÃ¬n", "examples": ["ç¦æ­¢", "ç›‘ç¦", "ç´«ç¦åŸ", "ç¦å¿Œ", "ç¦åœ°"]}]},
        {"char": "å°½", "pronunciations": [{"pinyin": "jÇn", "examples": ["å°½æ—©", "å°½ç®¡", "å°½å¿«", "å°½é‡"]}, {"pinyin": "jÃ¬n", "examples": ["ç”¨å°½", "è‡ªå°½", "å°½å¤´", "å°½å¿ƒ", "å°½æƒ…", "å°½èŒ"]}]},
        {"char": "è§’", "pronunciations": [{"pinyin": "jiÇo", "examples": ["ç‰›è§’", "å·è§’", "è§’è½", "ç›´è§’", "è§’åº¦"]}, {"pinyin": "juÃ©", "examples": ["è§’è‰²", "ä¸‘è§’", "åè§’", "è§’é€", "ä¸»è§’"]}]},
        {"char": "æ•™", "pronunciations": [{"pinyin": "jiÄo", "examples": ["æ•™ä¹¦", "æ•™å”±æ­Œ", "æ•™å°å­©", "æ•™ç»™"]}, {"pinyin": "jiÃ o", "examples": ["æ•™å¯¼", "æ•™è‚²", "ç®¡æ•™", "è¯·æ•™", "æ•™ç»ƒ", "æ•™å­¦"]}]},
        {"char": "é™", "pronunciations": [{"pinyin": "jiÃ ng", "examples": ["é™è½", "ä¸‹é™", "é™ä»·", "é™ä½"]}, {"pinyin": "xiÃ¡ng", "examples": ["æŠ•é™", "é™ä¼", "é™é¾™ä¼è™", "è¯±é™"]}]},
        {"char": "é—´", "pronunciations": [{"pinyin": "jiÄn", "examples": ["ä¸­é—´", "ç©ºé—´", "æ—¶é—´", "æˆ¿é—´"]}, {"pinyin": "jiÃ n", "examples": ["é—´éš”", "ç¦»é—´", "é—´è°", "é—´æ–­", "é—´æ¥", "äº²å¯†æ— é—´"]}]},
        {"char": "å‡", "pronunciations": [{"pinyin": "jiÇ", "examples": ["çœŸå‡", "å‡è®¾", "å‡å¦‚", "ä¸å‡æ€ç´¢"]}, {"pinyin": "jiÃ ", "examples": ["è¯·å‡", "æš‘å‡", "å‡æœŸ", "å‡æ—¥"]}]},
        {"char": "ç³»", "pronunciations": [{"pinyin": "jÃ¬", "examples": ["ç³»é‹å¸¦", "ç³»å›´è£™"]}, {"pinyin": "xÃ¬", "examples": ["ç³»ç»Ÿ", "è”ç³»", "ç³»å¿µ", "ç¡®ç³»å®æƒ…"]}]},
        {"char": "å‡ ", "pronunciations": [{"pinyin": "jÄ«", "examples": ["èŒ¶å‡ ", "çª—æ˜å‡ å‡€", "å‡ ä¹", "å‡ ç‡"]}, {"pinyin": "jÇ", "examples": ["å‡ ä¸ª", "åå‡ å²", "å‡ ä½•", "å‡ æ¬¡"]}]},
        {"char": "ç»™", "pronunciations": [{"pinyin": "gÄ›i", "examples": ["ç»™æˆ‘", "é€ç»™", "ç»™é¢å­"]}, {"pinyin": "jÇ", "examples": ["ä¾›ç»™", "ç»™å…»", "è‡ªç»™è‡ªè¶³", "ç»™äºˆ"]}]},
        {"char": "æ™ƒ", "pronunciations": [{"pinyin": "huÇng", "examples": ["æ™ƒçœ¼", "è™šæ™ƒä¸€æª", "ä¸€æ™ƒå°±æ¶ˆå¤±äº†"]}, {"pinyin": "huÃ ng", "examples": ["æ™ƒåŠ¨", "æ™ƒæ‚ ", "æ™ƒè¡", "æ‘‡å¤´æ™ƒè„‘"]}]},
        {"char": "å“„", "pronunciations": [{"pinyin": "hÅng", "examples": ["å“„å ‚", "å“„æŠ¬", "å“„æŠ¢", "å“„ä¼ "]}, {"pinyin": "hÃ²ng", "examples": ["èµ·å“„", "ä¸€å“„è€Œæ•£"]}, {"pinyin": "hÇ’ng", "examples": ["å“„éª—", "å“„é€—", "å“„å¼„"]}]},
        {"char": "å·", "pronunciations": [{"pinyin": "hÃ¡o", "examples": ["å·å«", "å“€å·", "æ€’å·", "å·å••"]}, {"pinyin": "hÃ o", "examples": ["å·ä»¤", "å¹å·", "å†²é”‹å·", "å·å¬"]}]},
        {"char": "ä¼¼", "pronunciations": [{"pinyin": "sÃ¬", "examples": ["ç›¸ä¼¼", "ä¼¼ä¹"]}, {"pinyin": "shÃ¬", "examples": ["ä¼¼çš„"]}]},
        {"char": "æ‰‡", "pronunciations": [{"pinyin": "shÄn", "examples": ["æ‰‡è€³å…‰", "æ‰‡æ‰‡å­", "æ‰‡åŠ¨"]}, {"pinyin": "shÃ n", "examples": ["è’²æ‰‡", "ç”µæ‰‡", "ä¸€æ‰‡çª—", "æ‰‡è´"]}]},
        {"char": "æ’’", "pronunciations": [{"pinyin": "sÄ", "examples": ["æ’’æ‰‹", "æ’’ç½‘", "æ’’å¨‡", "æ’’é‡"]}, {"pinyin": "sÇ", "examples": ["æ’’ç§", "æ’’æ’­"]}]},
        {"char": "é“º", "pronunciations": [{"pinyin": "pÅ«", "examples": ["é“ºåºŠ", "é“ºå«", "é“ºè®¾", "é“ºå¼ "]}, {"pinyin": "pÃ¹", "examples": ["é“ºå­", "åº—é“º", "åºŠé“º", "é“ºä½"]}]},
        {"char": "ç››", "pronunciations": [{"pinyin": "chÃ©ng", "examples": ["ç››é¥­", "ç››ä¸œè¥¿"]}, {"pinyin": "shÃ¨ng", "examples": ["ç››å¼€", "ç››äº§", "ç››å¤§", "æ—ºç››"]}]}
    ];

    // --- å…³è”è¯æ•°æ® ---
    const conjData = [
        {
            "category": "æ¡ä»¶å…³ç³»",
            "items": [
                {"pair": "åªè¦â€¦â€¦å°±â€¦â€¦", "sentences": ["åªè¦æˆ‘ä»¬åŠªåŠ›è¯»ä¹¦ï¼Œå°†æ¥å°±æœ‰æœºä¼šæˆä¸ºç¥–å›½çš„æ ‹æ¢ã€‚", "åªè¦æœ‰ä»˜å‡ºï¼Œå°±ä¸€å®šæœ‰æ”¶è·ã€‚"]},
                {"pair": "åªæœ‰â€¦â€¦æ‰â€¦â€¦", "sentences": ["åªæœ‰æˆ‘ä»¬å¹³æ—¶æ‰“å¥½åŸºç¡€ï¼Œæµ‹è¯•æ—¶æ‰èƒ½å¾—å¿ƒåº”æ‰‹ã€‚", "åªæœ‰ä¸æ–­åŠªåŠ›ï¼Œæ‰èƒ½æœ‰ç¾å¥½çš„æ˜å¤©ï¼"]}
            ]
        },
        {
            "category": "å¹¶åˆ—å…³ç³»",
            "items": [
                {"pair": "ä¸€è¾¹â€¦â€¦ä¸€è¾¹â€¦â€¦", "sentences": ["æˆ‘ä¸€è¾¹åœ¨ä¸€å®¶å·¥è‰ºç¾æœ¯çš„å°å‚å·¥ä½œï¼Œä¸€è¾¹è¿›è¡Œè‡ªå­¦ã€‚", "æˆ‘ä¸€è¾¹å¬éŸ³ä¹ï¼Œä¸€è¾¹å†™å­—ã€‚"]},
                {"pair": "æ—¢â€¦â€¦åˆâ€¦â€¦", "sentences": ["æ˜¥å¤©æ—¢ç¾ä¸½åˆå¯çˆ±ï¼Œæ—¢æ¸©é¦¨åˆå¤šå½©ã€‚", "æ ‘æœ¨æ—¢èƒ½ç»¿åŒ–ç¯å¢ƒï¼Œåˆèƒ½åˆ¶é€ å‡ºæ–°é²œç©ºæ°”ã€‚"]}
            ]
        },
        {
            "category": "å› æœå…³ç³»",
            "items": [
                {"pair": "å› ä¸ºâ€¦â€¦æ‰€ä»¥â€¦â€¦", "sentences": ["å› ä¸ºæ˜å¤©ä¸‹é›¨ï¼Œæ‰€ä»¥éƒŠæ¸¸å–æ¶ˆã€‚", "å› ä¸ºä»–ç—…äº†ï¼Œæ‰€ä»¥æ²¡æœ‰ä¸Šå­¦!"]},
                {"pair": "æ—¢ç„¶â€¦â€¦å°±â€¦â€¦", "sentences": ["æ—¢ç„¶ä½ è®¤è¯†åˆ°è‡ªå·±é”™äº†ï¼Œå°±åº”è¯¥ç«‹å³æ”¹æ­£ï¼", "æ—¢ç„¶å¤–é¢é£è¿™ä¹ˆå¤§ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åˆ«å‡ºå»äº†ã€‚"]}
            ]
        },
        {
            "category": "è½¬æŠ˜å…³ç³»",
            "items": [
                {"pair": "è™½ç„¶â€¦â€¦ä½†æ˜¯â€¦â€¦", "sentences": ["è™½ç„¶å°æ˜ä»Šå¤©ç”Ÿç—…äº†ï¼Œä½†ä»ç„¶åšæŒæ¥ä¸Šå­¦ã€‚", "è™½ç„¶å¤©æ°”å¾ˆçƒ­ï¼Œä½†æ˜¯å†œæ°‘ä¼¯ä¼¯ä¾ç„¶åˆ°ç”°é‡Œå¹²æ´»ã€‚"]},
                {"pair": "å°½ç®¡â€¦â€¦å¯æ˜¯â€¦â€¦", "sentences": ["å°½ç®¡ç”Ÿç—…äº†ï¼Œå¯æ˜¯ä»–è¿˜æ˜¯åšæŒå·¥ä½œã€‚", "å°½ç®¡å­¦ä¹ å¾ˆç´¯ï¼Œå¯æ˜¯æˆ‘ä»æ—§åšæŒç€ã€‚"]}
            ]
        }
    ];

    // --- è¿‘/åä¹‰è¯æ•°æ® ---
    const synonymsData = [
        {"word": "æ¼‚äº®", "synonyms": ["ç¾ä¸½", "å¥½çœ‹"], "antonyms": ["ä¸‘é™‹", "éš¾çœ‹"]},
        {"word": "å¿«ä¹", "synonyms": ["é«˜å…´", "å¹¸ç¦", "å–œæ‚¦"], "antonyms": ["å¿§æ„", "æ‚²ä¼¤", "ç—›è‹¦"]},
        {"word": "å®½é˜”", "synonyms": ["å®½å¹¿", "å¹¿é˜”"], "antonyms": ["ç‹­çª„", "çª„å°"]},
        {"word": "å¯»æ‰¾", "synonyms": ["å¯»è§…", "æ‰¾å¯»"], "antonyms": ["ä¸¢å¤±", "é—å¤±"]},
        {"word": "ç«‹åˆ»", "synonyms": ["é©¬ä¸Š", "é¡¿æ—¶", "å³åˆ»"], "antonyms": ["è¿Ÿç¼“", "ç¼“æ…¢"]},
        {"word": "æ¸©æŸ”", "synonyms": ["æ¸©é¡º", "å’Œè”¼"], "antonyms": ["ç²—æš´", "å‡¶ç‹ "]},
        {"word": "ä»”ç»†", "synonyms": ["è®¤çœŸ", "ç»†å¿ƒ"], "antonyms": ["é©¬è™", "ç²—å¿ƒ"]},
        {"word": "å¼ºçƒˆ", "synonyms": ["çŒ›çƒˆ", "å‰§çƒˆ"], "antonyms": ["å¾®å¼±", "æŸ”å’Œ"]},
        {"word": "è°¦è™š", "synonyms": ["è™šå¿ƒ"], "antonyms": ["éª„å‚²", "è‡ªæ»¡"]},
        {"word": "å‹‡æ•¢", "synonyms": ["èƒ†å¤§", "è‹±å‹‡"], "antonyms": ["èƒ†æ€¯", "æ‡¦å¼±"]}
    ];

    // --- æˆè¯­æ•°æ® ---
    const idiomsData = [
        {"idiom": "ä¸€é©¬å½“å…ˆ", "meaning": "å½¢å®¹é¢†å…ˆï¼Œä¹Ÿæ¯”å–»å·¥ä½œèµ°åœ¨ç¾¤ä¼—å‰é¢ï¼Œç§¯æå¸¦å¤´ã€‚", "example": "åœ¨æ¯”èµ›ä¸­ï¼Œä»–ä¸€é©¬å½“å…ˆï¼Œå†²åˆ°äº†æœ€å‰é¢ã€‚"},
        {"idiom": "ä¸¤è¢–æ¸…é£", "meaning": "å½¢å®¹åšå®˜å»‰æ´ï¼Œé™¤ä¸¤åªè¢–å­é‡Œçš„æ¸…é£å¤–ï¼Œåˆ«æ— æ‰€æœ‰ã€‚", "example": "ä»–å½“äº†å¤šå¹´æ¸…å®˜ï¼Œç¦»èŒæ—¶çœŸæ˜¯ä¸¤è¢–æ¸…é£ã€‚"},
        {"idiom": "ä¸‰å¿ƒäºŒæ„", "meaning": "åˆæƒ³è¿™æ ·åˆæƒ³é‚£æ ·ï¼ŒçŠ¹è±«ä¸å®šã€‚ä¹ŸæŒ‡ä¸ä¸“å¿ƒã€‚", "example": "æˆ‘ä»¬å­¦ä¹ ä¸èƒ½ä¸‰å¿ƒäºŒæ„ï¼Œè¦ä¸“å¿ƒè‡´å¿—ã€‚"},
        {"idiom": "å››é¢æ¥šæ­Œ", "meaning": "æ¯”å–»é™·å…¥å››é¢å—æ•Œã€å­¤ç«‹æ— æ´çš„å¢ƒåœ°ã€‚", "example": "æ•Œäººå·²ç»é™·å…¥äº†å››é¢æ¥šæ­Œçš„å¢ƒåœ°ã€‚"},
        {"idiom": "äº”å½©ç¼¤çº·", "meaning": "æŒ‡é¢œè‰²ç¹å¤šï¼Œéå¸¸å¥½çœ‹ã€‚", "example": "èŠ±å›­é‡Œçš„èŠ±äº”å½©ç¼¤çº·ï¼ŒçœŸç¾ä¸½ã€‚"},
        {"idiom": "å…­ç¥æ— ä¸»", "meaning": "å½¢å®¹æƒŠæ…Œå¤±æªï¼Œä¸çŸ¥å¦‚ä½•æ˜¯å¥½ã€‚", "example": "å¬åˆ°è¿™ä¸ªæ¶ˆæ¯ï¼Œä»–é¡¿æ—¶æƒŠå¾—å…­ç¥æ— ä¸»ã€‚"},
        {"idiom": "ä¸ƒæ‰‹å…«è„š", "meaning": "å½¢å®¹äººå¤šæ‰‹æ‚ï¼ŒåŠ¨ä½œçº·ä¹±ã€‚", "example": "å¤§å®¶ä¸ƒæ‰‹å…«è„šåœ°æŠŠå±‹å­æ”¶æ‹¾å¹²å‡€äº†ã€‚"},
        {"idiom": "å…«ä»™è¿‡æµ·", "meaning": "æ¯”å–»å„è‡ªæ‹¿å‡ºæœ¬é¢†æˆ–åŠæ³•ï¼Œäº’ç›¸ç«èµ›ã€‚", "example": "åœ¨è¿™æ¬¡æ¯”èµ›ä¸­ï¼Œå¤§å®¶å…«ä»™è¿‡æµ·ï¼Œå„æ˜¾ç¥é€šã€‚"},
        {"idiom": "ä¹ç‰›ä¸€æ¯›", "meaning": "æ¯”å–»æå¤§æ•°é‡ä¸­æå¾®å°çš„æ•°é‡ï¼Œå¾®ä¸è¶³é“ã€‚", "example": "è¿™ç‚¹é’±å¯¹ä»–æ¥è¯´åªæ˜¯ä¹ç‰›ä¸€æ¯›ã€‚"},
        {"idiom": "åå…¨åç¾", "meaning": "æŒ‡å„æ–¹é¢éƒ½éå¸¸å®Œç¾ï¼Œæ¯«æ— ç¼ºé™·ã€‚", "example": "ä¸–ç•Œä¸Šæ²¡æœ‰åå…¨åç¾çš„äººã€‚"}
    ];

    const poems = [
        {title: "æ‰€è§", author: "è¢æš", content: "ç‰§ç«¥éª‘é»„ç‰›ï¼Œæ­Œå£°æŒ¯æ—æ¨¾ã€‚æ„æ¬²æ•é¸£è‰ï¼Œå¿½ç„¶é—­å£ç«‹ã€‚"},
        {title: "å±±è¡Œ", author: "æœç‰§", content: "è¿œä¸Šå¯’å±±çŸ³å¾„æ–œï¼Œç™½äº‘ç”Ÿå¤„æœ‰äººå®¶ã€‚åœè½¦åçˆ±æ«æ—æ™šï¼Œéœœå¶çº¢äºäºŒæœˆèŠ±ã€‚"},
        {title: "èµ åˆ˜æ™¯æ–‡", author: "è‹è½¼", content: "è·å°½å·²æ— æ“é›¨ç›–ï¼ŒèŠæ®‹çŠ¹æœ‰å‚²éœœæã€‚ä¸€å¹´å¥½æ™¯å›é¡»è®°ï¼Œæœ€æ˜¯æ©™é»„æ©˜ç»¿æ—¶ã€‚"},
        {title: "å¤œä¹¦æ‰€è§", author: "å¶ç»ç¿", content: "è§è§æ¢§å¶é€å¯’å£°ï¼Œæ±Ÿä¸Šç§‹é£åŠ¨å®¢æƒ…ã€‚çŸ¥æœ‰å„¿ç«¥æŒ‘ä¿ƒç»‡ï¼Œå¤œæ·±ç¯±è½ä¸€ç¯æ˜ã€‚"},
        {title: "æœ›å¤©é—¨å±±", author: "æç™½", content: "å¤©é—¨ä¸­æ–­æ¥šæ±Ÿå¼€ï¼Œç¢§æ°´ä¸œæµè‡³æ­¤å›ã€‚ä¸¤å²¸é’å±±ç›¸å¯¹å‡ºï¼Œå­¤å¸†ä¸€ç‰‡æ—¥è¾¹æ¥ã€‚"},
        {title: "é¥®æ¹–ä¸Šåˆæ™´åé›¨", author: "è‹è½¼", content: "æ°´å…‰æ½‹æ»Ÿæ™´æ–¹å¥½ï¼Œå±±è‰²ç©ºè’™é›¨äº¦å¥‡ã€‚æ¬²æŠŠè¥¿æ¹–æ¯”è¥¿å­ï¼Œæ·¡å¦†æµ“æŠ¹æ€»ç›¸å®œã€‚"},
        {title: "æœ›æ´åº­", author: "åˆ˜ç¦¹é”¡", content: "æ¹–å…‰ç§‹æœˆä¸¤ç›¸å’Œï¼Œæ½­é¢æ— é£é•œæœªç£¨ã€‚é¥æœ›æ´åº­å±±æ°´ç¿ ï¼Œç™½é“¶ç›˜é‡Œä¸€é’èºã€‚"},
        {title: "æ—©å‘ç™½å¸åŸ", author: "æç™½", content: "æœè¾ç™½å¸å½©äº‘é—´ï¼Œåƒé‡Œæ±Ÿé™µä¸€æ—¥è¿˜ã€‚ä¸¤å²¸çŒ¿å£°å•¼ä¸ä½ï¼Œè½»èˆŸå·²è¿‡ä¸‡é‡å±±ã€‚"},
        {title: "é‡‡è²æ›²", author: "ç‹æ˜Œé¾„", content: "è·å¶ç½—è£™ä¸€è‰²è£ï¼ŒèŠ™è“‰å‘è„¸ä¸¤è¾¹å¼€ã€‚ä¹±å…¥æ± ä¸­çœ‹ä¸è§ï¼Œé—»æ­Œå§‹è§‰æœ‰äººæ¥ã€‚"}
    ];

    let state = {
        score: parseInt(localStorage.getItem('grade3_exam_score')) || 0,
        englishIndex: 0,
        puzzleOrder: [],
        unlocked: false
    };

    // --- è¯­éŸ³é€»è¾‘ (Phonics) ---
    const phonicsData = [
        { letter: "Aa", sound: "/ Ã¦ /", words: ["bag", "can", "and", "cat", "bad", "dad", "cab", "mad", "apple", "sad", "ant", "rat", "hat", "bat", "cap", "rabbit", "have", "hand", "van", "jam", "map", "nap", "fan", "ham"] },
        { letter: "Bb", sound: "/ b /", words: ["bed", "bag", "Bob", "cab", "big", "boy", "buy", "banana", "baby", "bear", "black", "blue", "back", "bread", "brown", "but"] },
        { letter: "Cc", sound: "/ k /", words: ["cat", "cut", "can", "cab", "cup", "cake", "cute", "colour", "close", "clean", "class", "computer", "cap", "car", "card", "come"] },
        { letter: "Dd", sound: "/ d /", words: ["dog", "bad", "dad", "sad", "dark", "day", "desk", "doll", "duck", "deer", "deep", "mud", "door", "down", "dance", "dinner"] },
        { letter: "Ee", sound: "/ e /", words: ["egg", "pet", "leg", "web", "set", "elephant", "desk", "yellow", "member", "bed", "nest", "pen", "red", "seven", "ten", "men", "bell", "end", "vet", "wet", "fed", "hen", "help", "jet"] },
        { letter: "Ff", sound: "/ f /", words: ["fish", "for", "from", "fire", "floor", "fruit", "five", "beef", "four", "fast", "fly", "fox", "friend", "family", "far", "food", "frog", "foot", "flower", "find", "farm", "funny", "fat", "fear"] },
        { letter: "Gg", sound: "/ g /", words: ["go", "gift", "bug", "grass", "glad", "pig", "girl", "flag", "tag", "frog", "glass", "grape", "green", "grow", "give", "game", "tiger", "guess", "get", "leg"] },
        { letter: "Hh", sound: "/ h /", words: ["hot", "help", "hit", "hear", "her", "his", "hat", "head", "hand", "have", "how", "home", "hope", "happy", "house", "hair"] },
        { letter: "Ii", sound: "/ Éª /", words: ["ill", "kid", "big", "dig", "sit", "six", "fix", "pig", "pin", "lip", "sip", "hit", "fit", "win", "fin", "bin", "pick", "little", "city", "window"] },
        { letter: "Jj", sound: "/ dÊ’ /", words: ["job", "Jim", "joy", "jet", "jam", "juice", "June", "July", "jog", "jump", "jungle", "jacket"] },
        { letter: "Kk", sound: "/ k /", words: ["Kim", "kite", "kid", "key", "kind", "keep", "kick", "kitchen", "cook", "milk", "drink", "look", "book", "dark", "park", "talk", "work", "mask", "risk", "bank"] },
        { letter: "Ll", sound: "/ l /", words: ["leg", "lion", "lab", "link", "like", "love", "listen", "light", "little", "plant", "late", "long", "lamp", "lamb", "yellow", "let"] },
        { letter: "Mm", sound: "/ m /", words: ["map", "mother", "mouse", "money", "mud", "men", "my", "maths", "mouth", "mum", "make", "monkey", "meet", "summer", "member", "Monday", "March", "me", "Miss", "Mr"] },
        { letter: "Nn", sound: "/ n /", words: ["new", "pan", "need", "nose", "noodles", "not", "nap", "nine", "nice", "nurse", "fan", "no", "name", "night", "near", "now", "never", "net", "noon"] },
        { letter: "Oo", sound: "/ É’ /", words: ["box", "dot", "body", "lock", "orange", "job", "log", "shop", "sock", "hop", "cop", "top", "pot", "hot", "frog", "fog", "drop", "fox", "mop", "on"] },
        { letter: "Pp", sound: "/ p /", words: ["cup", "pen", "pink", "pet", "plant", "sleep", "help", "party", "people", "parent", "pretty", "paint", "pig", "pan", "purple", "panda", "plane", "park", "hope", "piano", "happy", "peel", "polite", "put"] },
        { letter: "Qq", sound: "/ kw /", words: ["quit", "quiet", "queen", "quick", "question", "quilt", "quiz", "quarter"] },
        { letter: "Rr", sound: "/ r /", words: ["red", "ride", "from", "friend", "fresh", "fruit", "ruler", "race", "rock", "rat", "rest", "rude", "robot", "run", "read", "rabbit"] },
        { letter: "Ss", sound: "/ s /", words: ["see", "say", "small", "some", "sister", "so", "set", "sea", "sun", "six", "school", "grass", "bus", "seven", "study", "goose"] },
        { letter: "Tt", sound: "/ t /", words: ["Ted", "sit", "tall", "talk", "vet", "tea", "mat", "hat", "taste", "table", "tap", "tiger", "hit", "nut", "cut", "tub", "cat", "hot", "shirt", "eat"] },
        { letter: "Uu", sound: "/ ÊŒ /", words: ["run", "up", "cut", "nut", "fun", "mud", "mug", "cup", "jump", "lucky", "sun", "bus", "uncle", "gum", "duck", "tub", "bug", "us", "plus", "hug"] },
        { letter: "Vv", sound: "/ v /", words: ["van", "vet", "vat", "vest", "very", "visit", "vacation", "five", "give", "live", "drive", "over", "wave", "love", "river", "vegetable"] },
        { letter: "Ww", sound: "/ w /", words: ["we", "win", "won", "with", "swim", "well", "wig", "will", "want", "week", "west", "wall", "wave", "wait", "walk", "warm", "water", "wind", "wood", "window"] },
        { letter: "Xx", sound: "/ ks /", words: ["box", "six", "fix", "tax", "taxi", "fox", "mix", "sex"] },
        { letter: "Yy", sound: "/ j /", words: ["yum", "yo-yo", "yellow", "yes", "year", "yell", "you", "yard", "young", "yeah", "your"] },
        { letter: "Zz", sound: "/ z /", words: ["Zip", "zero", "zig", "zebra", "zoo", "size", "lazy", "zone"] }
    ];

    function loadPhonics() {
        const container = document.getElementById('phonics-container');
        phonicsData.forEach((item, i) => {
            const card = document.createElement('div');
            card.className = 'col-md-6 col-lg-4';
            card.innerHTML = `
                <div class="phonics-card animate__animated animate__fadeInUp" style="animation-delay: ${i*0.1}s">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <div>
                            <span class="phonics-letter">${item.letter}</span>
                            <span class="phonics-sound">${item.sound}</span>
                        </div>
                        <button class="btn btn-sm btn-outline-primary rounded-pill" onclick="playPhonicsSound('${item.letter}', '${item.sound}')">ğŸ”Š å‘éŸ³</button>
                    </div>
                    <div class="phonics-words">
                        ${item.words.map(word => `<span class="phonics-word-item" onclick="speak('${word}')">${word}</span>`).join('')}
                    </div>
                </div>
            `;
            container.appendChild(card);
        });
    }

    function playPhonicsSound(letter, sound) {
        speak(letter[0], 0.8, () => {
            setTimeout(() => {
                speak(letter[0], 0.6); 
            }, 500);
        });
    }

    // --- é¡µé¢åˆå§‹åŒ– ---
    window.onload = () => {
        updateScore(0);
        loadPoetry();
        loadPhonics();
        loadPoly();
        loadConj();
        loadSyn();
        loadIdiom();
    };

    function updateScore(pts) {
        state.score += pts;
        document.getElementById('user-score').innerText = state.score;
        localStorage.setItem('grade3_exam_score', state.score);
        if(pts >= 0) showFeedback();
    }

    function showFeedback() {
        const pop = document.getElementById('feedback-pop');
        if(!pop) {
            const div = document.createElement('div');
            div.id = 'feedback-pop';
            div.className = 'fixed-top text-center display-1 animate__animated animate__zoomIn';
            div.style.zIndex = '2000';
            div.style.top = '40%';
            document.body.appendChild(div);
        }
        const emojis = ['ğŸ‰', 'â­', 'ğŸˆ', 'âœ¨', 'ğŸ†'];
        const p = document.getElementById('feedback-pop');
        p.innerText = emojis[Math.floor(Math.random()*emojis.length)];
        p.style.display = 'block';
        setTimeout(() => p.style.display = 'none', 1000);
        document.getElementById('sfx-correct').play();
    }

    function unlockAudio() {
        state.unlocked = true;
        speak("åŠ æ²¹åŠ æ²¹ï¼");
        alert("è¯­éŸ³åŠŸèƒ½å·²å¼€å¯ï¼");
    }

    function speak(text, rate = 1.0, callback) {
        if (!window.speechSynthesis) return;
        window.speechSynthesis.cancel();
        const utter = new SpeechSynthesisUtterance(text);
        utter.lang = text.match(/[\u4e00-\u9fa5]/) ? 'zh-CN' : 'en-US';
        utter.rate = rate;
        if(callback) utter.onend = callback;
        window.speechSynthesis.speak(utter);
    }

    // --- è‹±è¯­é€»è¾‘ ---
    function startEnglishChallenge() {
        state.englishIndex = 0;
        document.getElementById('english-game-start').style.display = 'none';
        document.getElementById('english-game-play').style.display = 'block';
        loadEnglishQuestion();
    }

    function loadEnglishQuestion() {
        const q = englishQuestions[state.englishIndex];
        document.getElementById('current-question').innerText = q.q;
        document.getElementById('english-progress').style.width = `${(state.englishIndex / englishQuestions.length) * 100}%`;
        
        const optionsDiv = document.getElementById('translation-options');
        optionsDiv.innerHTML = '';
        const options = [q.cn];
        while(options.length < 4) {
            const randomCn = englishQuestions[Math.floor(Math.random()*englishQuestions.length)].cn;
            if(!options.includes(randomCn)) options.push(randomCn);
        }
        options.sort(() => Math.random() - 0.5).forEach(opt => {
            const btn = document.createElement('div');
            btn.className = 'translation-option animate__animated animate__fadeIn';
            btn.innerText = opt;
            btn.onclick = () => checkTranslation(opt, btn);
            optionsDiv.appendChild(btn);
        });

        document.getElementById('translation-phase').style.display = 'block';
        document.getElementById('puzzle-phase').style.display = 'none';
        document.getElementById('english-result').style.display = 'none';
        speak(q.q);
    }

    function checkTranslation(selected, btn) {
        const q = englishQuestions[state.englishIndex];
        if(selected === q.cn) {
            btn.classList.add('bg-success', 'text-white');
            setTimeout(() => {
                document.getElementById('translation-phase').style.display = 'none';
                loadPuzzle();
            }, 600);
        } else {
            btn.classList.add('bg-danger', 'text-white', 'animate__shakeX');
            speak("ä¸å¯¹å“¦ï¼Œå†æƒ³æƒ³");
            setTimeout(() => btn.className = 'translation-option', 1000);
        }
    }

    function loadPuzzle() {
        const q = englishQuestions[state.englishIndex];
        document.getElementById('puzzle-phase').style.display = 'block';
        document.getElementById('answer-display').innerHTML = '<p class="text-muted small m-0">æ‹¼å‡ºè‹±æ–‡å›ç­”...</p>';
        state.puzzleOrder = [];
        
        const words = q.a.split(' ');
        const pool = document.getElementById('word-pool');
        pool.innerHTML = '';
        [...words].sort(() => Math.random() - 0.5).forEach(w => {
            const div = document.createElement('div');
            div.className = 'word-block shadow-sm animate__animated animate__fadeIn';
            div.innerText = w;
            div.onclick = () => selectWord(w, div);
            pool.appendChild(div);
        });
    }

    function selectWord(word, el) {
        if(el.style.visibility === 'hidden') return;
        const q = englishQuestions[state.englishIndex];
        const words = q.a.split(' ');
        if(word === words[state.puzzleOrder.length]) {
            state.puzzleOrder.push(word);
            el.style.visibility = 'hidden';
            const display = document.getElementById('answer-display');
            if(state.puzzleOrder.length === 1) display.innerHTML = '';
            display.innerHTML += `<span class="badge bg-primary p-2 animate__animated animate__bounceIn m-1">${word}</span> `;
            speak(word);
            if(state.puzzleOrder.length === words.length) {
                showSuccess();
            }
        } else {
            el.classList.add('bg-danger', 'text-white', 'animate__shakeX');
            setTimeout(() => el.classList.remove('bg-danger', 'text-white', 'animate__shakeX'), 500);
            speak("ä¸å¯¹å“¦");
        }
    }

    function showSuccess() {
        const q = englishQuestions[state.englishIndex];
        document.getElementById('english-result').style.display = 'block';
        document.getElementById('correct-answer').innerText = q.a;
        speak(q.a, 0.9, () => updateScore(10));
    }

    function nextEnglishQuestion() {
        state.englishIndex++;
        if(state.englishIndex < englishQuestions.length) {
            loadEnglishQuestion();
        } else {
            alert("é€šå…³å•¦ï¼å®è´ä½ æ˜¯æœ€æ£’çš„ï¼ğŸ‘");
            startEnglishChallenge();
        }
    }

    function hearQuestion() {
        speak(englishQuestions[state.englishIndex].q);
    }

    function showHint() {
        alert("æ‚„æ‚„å‘Šè¯‰ä½ ï¼Œç­”æ¡ˆæ˜¯: " + englishQuestions[state.englishIndex].a);
    }

    // --- è¯­æ–‡é€»è¾‘: å¤šéŸ³å­— ---
    function loadPoly() {
        const container = document.getElementById('poly-container');
        container.innerHTML = polyData.map((item, i) => `
            <div class="col-md-4">
                <div class="poly-card animate__animated animate__fadeIn" style="animation-delay: ${i*0.05}s">
                    <span class="poly-char">${item.char}</span>
                    ${item.pronunciations.map(p => `
                        <div class="poly-item" onclick="speak('${item.char}ï¼Œè¯»éŸ³${p.pinyin}ï¼Œä¾‹å¦‚${p.examples.slice(0,2).join('ã€')}')">
                            <div class="poly-pinyin">/ ${p.pinyin} /</div>
                            <div class="poly-examples">${p.examples.join('ã€')}</div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `).join('');
    }

    // --- è¯­æ–‡é€»è¾‘: å…³è”è¯ ---
    function loadConj() {
        const container = document.getElementById('conj-container');
        container.innerHTML = conjData.map((cat, i) => `
            <div class="col-12">
                <div class="fw-bold mb-3 mt-2 text-secondary">ğŸ“ ${cat.category}</div>
                <div class="row">
                    ${cat.items.map(item => `
                        <div class="col-md-6">
                            <div class="conj-card shadow-sm animate__animated animate__fadeInUp">
                                <div class="conj-pair">${item.pair}</div>
                                ${item.sentences.map(s => `
                                    <div class="conj-sentence" onclick="speak('${s.replace(/'/g, "\\'")}')">
                                        ï¿½ ${s}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `).join('');
    }

    // --- å¤šéŸ³å­—ç»ƒä¹ é€»è¾‘ ---
    let polyExState = { current: null, score: 0 };
    function startPolyExercise() {
        document.getElementById('poly-container').style.display = 'none';
        document.getElementById('poly-exercise').style.display = 'block';
        nextPolyQuestion();
    }
    function stopPolyExercise() {
        document.getElementById('poly-container').style.display = 'flex';
        document.getElementById('poly-exercise').style.display = 'none';
    }
    function nextPolyQuestion() {
        const item = polyData[Math.floor(Math.random() * polyData.length)];
        const pron = item.pronunciations[Math.floor(Math.random() * item.pronunciations.length)];
        const example = pron.examples[Math.floor(Math.random() * pron.examples.length)];
        
        polyExState.current = { char: item.char, pinyin: pron.pinyin, example };
        
        const sentence = example.replace(item.char, `<span class="exercise-blank">?</span>`);
        document.getElementById('poly-ex-sentence').innerHTML = `â€œ${sentence}â€ä¸­çš„â€œ${item.char}â€è¯»ä»€ä¹ˆï¼Ÿ`;
        
        const optionsDiv = document.getElementById('poly-ex-options');
        optionsDiv.innerHTML = '';
        
        const allPinyins = [...new Set(item.pronunciations.map(p => p.pinyin))];
        allPinyins.forEach(p => {
            const btn = document.createElement('div');
            btn.className = 'exercise-option animate__animated animate__fadeIn';
            btn.innerText = p;
            btn.onclick = () => checkPolyAnswer(p, btn);
            optionsDiv.appendChild(btn);
        });
        speak(`åœ¨è¯è¯­â€œ${example}â€ä¸­ï¼Œè¿™ä¸ªå­—è¯»ä»€ä¹ˆå‘¢ï¼Ÿ`);
    }
    function checkPolyAnswer(selected, btn) {
        if(selected === polyExState.current.pinyin) {
            btn.classList.add('correct');
            document.getElementById('poly-ex-sentence').querySelector('.exercise-blank').innerText = selected;
            speak("ç­”å¯¹å•¦ï¼" + polyExState.current.char + "ï¼Œè¯»" + selected);
            updateScore(5);
            setTimeout(nextPolyQuestion, 1500);
        } else {
            btn.classList.add('wrong');
            speak("ä¸å¯¹å“¦ï¼Œå†å¬å¬å®ƒçš„è¯»éŸ³");
            setTimeout(() => btn.classList.remove('wrong'), 1000);
        }
    }

    // --- å…³è”è¯æŒ‘æˆ˜é€»è¾‘ ---
    let conjExState = { current: null };
    function startConjExercise() {
        document.getElementById('conj-container').style.display = 'none';
        document.getElementById('conj-exercise').style.display = 'block';
        nextConjQuestion();
    }
    function stopConjExercise() {
        document.getElementById('conj-container').style.display = 'block';
        document.getElementById('conj-exercise').style.display = 'none';
    }
    function nextConjQuestion() {
        const cat = conjData[Math.floor(Math.random() * conjData.length)];
        const item = cat.items[Math.floor(Math.random() * cat.items.length)];
        const sentence = item.sentences[Math.floor(Math.random() * item.sentences.length)];
        
        conjExState.current = { pair: item.pair, sentence };
        
        // ç®€å•å¤„ç†ï¼šå°†å…³è”è¯æ›¿æ¢ä¸ºä¸‹åˆ’çº¿
        let displaySentence = sentence;
        const parts = item.pair.split('â€¦â€¦');
        parts.forEach(p => {
            if(p.trim()) displaySentence = displaySentence.replace(p.trim(), ' ______ ');
        });
        
        document.getElementById('conj-ex-sentence').innerHTML = displaySentence;
        const optionsDiv = document.getElementById('conj-ex-options');
        optionsDiv.innerHTML = '';
        
        // ç”Ÿæˆå¹²æ‰°é¡¹
        let options = [item.pair];
        while(options.length < 4) {
            const randomCat = conjData[Math.floor(Math.random() * conjData.length)];
            const randomItem = randomCat.items[Math.floor(Math.random() * randomCat.items.length)];
            if(!options.includes(randomItem.pair)) options.push(randomItem.pair);
        }
        
        options.sort(() => Math.random() - 0.5).forEach(opt => {
            const btn = document.createElement('div');
            btn.className = 'exercise-option animate__animated animate__fadeIn';
            btn.innerText = opt;
            btn.onclick = () => checkConjAnswer(opt, btn);
            optionsDiv.appendChild(btn);
        });
        speak("è¯·é€‰å‡ºåˆé€‚çš„å…³è”è¯å¡«ç©º");
    }
    function checkConjAnswer(selected, btn) {
        if(selected === conjExState.current.pair) {
            btn.classList.add('correct');
            document.getElementById('conj-ex-sentence').innerText = conjExState.current.sentence;
            speak("çœŸæ£’ï¼å…³è”è¯ç”¨å¾—éå¸¸å‡†ç¡®ï¼");
            updateScore(10);
            setTimeout(nextConjQuestion, 2000);
        } else {
            btn.classList.add('wrong');
            speak("é€»è¾‘å…³ç³»ä¸å¤ªå¯¹å“¦ï¼Œå†é€‰é€‰çœ‹");
            setTimeout(() => btn.classList.remove('wrong'), 1000);
        }
    }

    // --- è¿‘/åä¹‰è¯é€»è¾‘ ---
    function loadSyn() {
        const container = document.getElementById('syn-container');
        container.innerHTML = synonymsData.map((item, i) => `
            <div class="col-md-6">
                <div class="module-card shadow-sm animate__animated animate__fadeIn" style="border-left: 5px solid #FFD54F;">
                    <h5 class="fw-bold text-primary mb-3">${item.word}</h5>
                    <div class="mb-2">
                        <span class="badge bg-warning text-dark me-2">è¿‘ä¹‰è¯</span>
                        <span class="text-muted">${item.synonyms.join('ã€')}</span>
                    </div>
                    <div>
                        <span class="badge bg-secondary me-2">åä¹‰è¯</span>
                        <span class="text-muted">${item.antonyms.join('ã€')}</span>
                    </div>
                </div>
            </div>
        `).join('');
    }

    let synExState = { current: null };
    function startSynExercise() {
        document.getElementById('syn-container').style.display = 'none';
        document.getElementById('syn-exercise').style.display = 'block';
        nextSynQuestion();
    }
    function stopSynExercise() {
        document.getElementById('syn-container').style.display = 'flex';
        document.getElementById('syn-exercise').style.display = 'none';
    }
    function nextSynQuestion() {
        const item = synonymsData[Math.floor(Math.random() * synonymsData.length)];
        const isSyn = Math.random() > 0.5;
        const targetList = isSyn ? item.synonyms : item.antonyms;
        const typeStr = isSyn ? "è¿‘ä¹‰è¯" : "åä¹‰è¯";
        
        synExState.current = { word: item.word, answer: targetList, type: typeStr };
        
        document.getElementById('syn-ex-sentence').innerHTML = `è¯·é€‰å‡ºâ€œ<span class="text-primary">${item.word}</span>â€çš„<span class="text-danger">${typeStr}</span>ï¼š`;
        
        const optionsDiv = document.getElementById('syn-ex-options');
        optionsDiv.innerHTML = '';
        
        // æ­£ç¡®ç­”æ¡ˆä¸­é€‰ä¸€ä¸ª
        let options = [targetList[Math.floor(Math.random() * targetList.length)]];
        
        // ç”Ÿæˆå¹²æ‰°é¡¹
        while(options.length < 4) {
            const randomItem = synonymsData[Math.floor(Math.random() * synonymsData.length)];
            const randomType = Math.random() > 0.5 ? randomItem.synonyms : randomItem.antonyms;
            const randomWord = randomType[Math.floor(Math.random() * randomType.length)];
            if(!options.includes(randomWord) && !targetList.includes(randomWord)) {
                options.push(randomWord);
            }
        }
        
        options.sort(() => Math.random() - 0.5).forEach(opt => {
            const btn = document.createElement('div');
            btn.className = 'exercise-option animate__animated animate__fadeIn';
            btn.innerText = opt;
            btn.onclick = () => checkSynAnswer(opt, btn);
            optionsDiv.appendChild(btn);
        });
        speak(`è¯·é€‰å‡º${item.word}çš„${typeStr}`);
    }
    function checkSynAnswer(selected, btn) {
        if(synExState.current.answer.includes(selected)) {
            btn.classList.add('correct');
            speak(`ç­”å¯¹å•¦ï¼${synExState.current.word}çš„${synExState.current.type}æ˜¯${selected}`);
            updateScore(5);
            setTimeout(nextSynQuestion, 1500);
        } else {
            btn.classList.add('wrong');
            speak("ä¸å¯¹å“¦ï¼Œå†ä»”ç»†æƒ³æƒ³");
            setTimeout(() => btn.classList.remove('wrong'), 1000);
        }
    }

    // --- æˆè¯­æŒ‘æˆ˜é€»è¾‘ ---
    function loadIdiom() {
        const container = document.getElementById('idiom-container');
        container.innerHTML = idiomsData.map((item, i) => `
            <div class="col-md-6">
                <div class="module-card shadow-sm h-100 animate__animated animate__fadeIn" style="border-top: 5px solid #81C784;">
                    <h5 class="fw-bold text-success mb-2">${item.idiom}</h5>
                    <p class="small text-muted mb-2"><strong>è§£é‡Šï¼š</strong>${item.meaning}</p>
                    <p class="small text-secondary mb-0"><strong>ä¾‹å¥ï¼š</strong>${item.example}</p>
                    <button class="btn btn-sm btn-outline-success mt-3 rounded-pill" onclick="speak('${item.idiom}ã€‚${item.meaning}')">ğŸ”Š æœ—è¯»</button>
                </div>
            </div>
        `).join('');
    }

    let idiomExState = { current: null };
    function startIdiomChallenge() {
        document.getElementById('idiom-container').style.display = 'none';
        document.getElementById('idiom-exercise').style.display = 'block';
        nextIdiomQuestion();
    }
    function stopIdiomChallenge() {
        document.getElementById('idiom-container').style.display = 'flex';
        document.getElementById('idiom-exercise').style.display = 'none';
    }
    function nextIdiomQuestion() {
        const item = idiomsData[Math.floor(Math.random() * idiomsData.length)];
        idiomExState.current = item;
        
        document.getElementById('idiom-ex-sentence').innerHTML = `â€œ<span class="text-muted small">${item.meaning}</span>â€<br>å¯¹åº”çš„æˆè¯­æ˜¯ï¼Ÿ`;
        
        const optionsDiv = document.getElementById('idiom-ex-options');
        optionsDiv.innerHTML = '';
        
        let options = [item.idiom];
        while(options.length < 4) {
            const randomItem = idiomsData[Math.floor(Math.random() * idiomsData.length)];
            if(!options.includes(randomItem.idiom)) options.push(randomItem.idiom);
        }
        
        options.sort(() => Math.random() - 0.5).forEach(opt => {
            const btn = document.createElement('div');
            btn.className = 'exercise-option animate__animated animate__fadeIn';
            btn.innerText = opt;
            btn.onclick = () => checkIdiomAnswer(opt, btn);
            optionsDiv.appendChild(btn);
        });
        speak("è¯·æ ¹æ®æ„æ€é€‰å‡ºæ­£ç¡®çš„æˆè¯­");
    }
    function checkIdiomAnswer(selected, btn) {
        if(selected === idiomExState.current.idiom) {
            btn.classList.add('correct');
            speak(`å¤ªæ£’äº†ï¼è¿™å°±æ˜¯æˆè¯­${selected}çš„æ„æ€`);
            updateScore(15);
            setTimeout(nextIdiomQuestion, 2000);
        } else {
            btn.classList.add('wrong');
            speak("é€‰é”™å•¦ï¼Œå†è¯»è¯»æˆè¯­æ„æ€å§");
            setTimeout(() => btn.classList.remove('wrong'), 1000);
        }
    }

    // --- å¤è¯—é€»è¾‘ ---
    function loadPoetry() {
        const container = document.getElementById('poetry-list');
        container.innerHTML = poems.map((p, idx) => `
            <div class="col-md-4">
                <div class="poetry-card" onclick="flipPoetry(this, ${idx})">
                    <div class="poetry-front">
                        <div class="poetry-title" style="font-weight: bold; color: #2E7D32; font-size: 1.3rem; margin-bottom: 10px;">${p.title}</div>
                        <div class="text-muted small">${p.author}</div>
                        <div class="mt-2 text-success"><i class="bi bi-arrow-repeat"></i> ç‚¹å‡»ç¿»è½¬</div>
                    </div>
                    <div class="poetry-back">
                        <div class="poetry-content-full">${p.content.split(/[ï¼Œã€‚ï¼Ÿï¼]/).filter(s => s.trim()).join('ã€‚<br>')}ã€‚</div>
                    </div>
                </div>
            </div>
        `).join('');
    }

    function flipPoetry(card, idx) {
        card.classList.toggle('is-flipped');
        if (card.classList.contains('is-flipped')) {
            speak(poems[idx].title + "ã€‚" + poems[idx].author + "ã€‚" + poems[idx].content);
        }
    }

    function marukoTalk() {
        const lines = ["å®è´ï¼ŒåŠ æ²¹å¤ä¹ å“¦ï¼", "å°ä¸¸å­é™ªç€ä½ ï¼Œè€ƒ 100 åˆ†ï¼", "ä½ æ˜¯æœ€æ£’çš„å°æ‰å¥³ï¼", "è‹±è¯­å’Œè¯­æ–‡éƒ½è¦åŠ æ²¹ï¼"];
        const line = lines[Math.floor(Math.random()*lines.length)];
        speak(line);
        alert("å°ä¸¸å­è¯´ï¼š" + line);
    }
</script>
</body>
</html>
