<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ€ç»´è®­ç»ƒè¥ - Catherineçš„è‹±è¯­è¯¾å ‚</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        :root {
            --detective-blue: #1A237E;
            --clue-gold: #FFD600;
            --bg-color: #F5F7FA;
        }

        body {
            background-color: var(--bg-color);
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            padding-bottom: 50px;
        }

        .header {
            background: var(--detective-blue);
            color: white;
            padding: 40px 0;
            text-align: center;
            border-bottom: 5px solid var(--clue-gold);
            margin-bottom: 30px;
            position: relative;
        }

        .btn-unlock-audio {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .clue-box {
            background: white;
            border-left: 10px solid var(--clue-gold);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            margin-bottom: 30px;
            min-height: 150px;
        }

        .clue-text {
            font-size: 1.4rem;
            color: #333;
            line-height: 1.6;
        }

        .clue-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .clue-text-content {
            cursor: pointer;
            flex: 1;
        }

        .btn-play-clue {
            background: none;
            border: none;
            color: var(--detective-blue);
            cursor: pointer;
            font-size: 1.2rem;
            opacity: 0.6;
            transition: opacity 0.2s;
        }

        .btn-play-clue:hover {
            opacity: 1;
        }

        .profile-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
            border: 3px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .profile-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }

        .profile-card.selected {
            border-color: var(--detective-blue);
            background: #E8EAF6;
        }

        .profile-card.eliminated {
            opacity: 0.3;
            filter: grayscale(100%);
            pointer-events: none;
        }

        .avatar {
            width: 100px;
            height: 100px;
            background: #eee;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .trait-badge {
            display: inline-block;
            padding: 2px 10px;
            border-radius: 20px;
            background: #f0f0f0;
            font-size: 0.8rem;
            margin: 2px;
        }

        .btn-back {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            text-decoration: none;
        }

        .game-status {
            font-weight: bold;
            color: var(--detective-blue);
        }

        #feedback {
            font-size: 1.2rem;
            margin-top: 20px;
            height: 30px;
        }

        .level-indicator {
            background: rgba(255,255,255,0.2);
            padding: 5px 20px;
            border-radius: 50px;
            display: inline-block;
            margin-top: 10px;
        }
    </style>
</head>
<body>

<div class="header">
    <a href="index.html" class="btn-back">â† è¿”å›</a>
    <button id="btn-unlock-audio" class="btn btn-warning btn-sm rounded-pill btn-unlock-audio" onclick="unlockVoice()">ğŸ”Š å¼€å¯è¯­éŸ³</button>
    <h1 class="animate__animated animate__fadeInDown">ğŸ•µï¸â€â™‚ï¸ è‹±è¯­æ€ç»´è®­ç»ƒè¥</h1>
    <p>å°å°ä¾¦æ¢ï¼šæ ¹æ®çº¿ç´¢æ‰¾å‡ºæ­£ç¡®çš„äººç‰©æˆ–äº‹ç‰©ï¼<br><small style="opacity: 0.5; font-size: 0.6rem;">Update: 2026.01.16.V2</small></p>
    <div class="level-indicator">ç¬¬ <span id="levelNum">1</span> å…³</div>
</div>

<div class="container">
    <div class="row">
        <!-- Clue Section -->
        <div class="col-md-4">
            <div class="clue-box animate__animated animate__fadeInLeft">
                <h4 class="text-muted mb-3"><i class="bi bi-search"></i> æ¡ˆä»¶çº¿ç´¢ (Clues):</h4>
                <div id="clueContent" class="clue-text">
                    <!-- Clues go here -->
                </div>
            </div>
            <div class="text-center mb-4">
                <div id="feedback"></div>
                <div class="mt-3">
                    <span class="game-status">å¾—åˆ†: <span id="score">0</span></span>
                </div>
            </div>
        </div>

        <!-- Cards Section -->
        <div class="col-md-8">
            <div class="row g-4" id="cardGrid">
                <!-- Profile cards go here -->
            </div>
        </div>
    </div>
</div>

<!-- Modal for Game Over -->
<div class="modal fade" id="winModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content text-center p-5 rounded-4">
            <h1 class="display-3">ğŸ†</h1>
            <h2>é€»è¾‘å¤§å¸ˆï¼</h2>
            <p class="lead">ä½ æˆåŠŸç ´è§£äº†æ‰€æœ‰è°œé¢˜ï¼</p>
            <div class="h3 text-primary mb-4">æ€»åˆ†: <span id="finalScore">0</span></div>
            <button class="btn btn-primary btn-lg rounded-pill" onclick="location.reload()">é‡æ–°æŒ‘æˆ˜</button>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // é¢˜åº“æ‰©å……è‡³ 100 é¢˜ï¼Œå¹¶æŒ‰å•å…ƒåˆ†ç±»
    const bank = {
        unit1: [
            { clues: ["He is <b>old</b>.", "He is <b>strict</b>.", "He is our <b>math teacher</b>."], answer: "Mr. Li", profiles: [{ name: "Mr. Li", job: "Math Teacher", traits: ["old", "strict"], icon: "ğŸ‘¨â€ğŸ«" }, { name: "Ms. Wang", job: "English Teacher", traits: ["young", "kind"], icon: "ğŸ‘©â€ğŸ«" }, { name: "Mr. Zhang", job: "Music Teacher", traits: ["funny", "young"], icon: "ğŸ‘¨â€ğŸ¤" }, { name: "Miss White", job: "Art Teacher", traits: ["shy", "kind"], icon: "ğŸ‘©â€ğŸ¨" }] },
            { clues: ["She is <b>not old</b>.", "She is <b>very kind</b>.", "She is our <b>English teacher</b>."], answer: "Ms. Wang", profiles: [{ name: "Mr. Li", job: "Math Teacher", traits: ["old", "strict"], icon: "ğŸ‘¨â€ğŸ«" }, { name: "Ms. Wang", job: "English Teacher", traits: ["young", "kind"], icon: "ğŸ‘©â€ğŸ«" }, { name: "Mr. Wu", job: "PE Teacher", traits: ["strong", "funny"], icon: "ğŸ€" }, { name: "Miss Chen", job: "Chinese Teacher", traits: ["young", "shy"], icon: "ğŸ‘©â€ğŸ«" }] },
            { clues: ["He is <b>funny</b>.", "He is <b>clever</b>.", "He is <b>young</b>.", "He is our <b>music teacher</b>."], answer: "Mr. Zhang", profiles: [{ name: "Mr. Li", job: "Math Teacher", traits: ["old", "strict"], icon: "ğŸ‘¨â€ğŸ«" }, { name: "Mr. Zhang", job: "Music Teacher", traits: ["young", "funny", "clever"], icon: "ğŸ‘¨â€ğŸ¤" }, { name: "Mr. Wu", job: "PE Teacher", traits: ["strong", "funny"], icon: "ğŸ€" }, { name: "Mr. Zhao", job: "Science Teacher", traits: ["old", "clever"], icon: "ğŸ‘¨â€ğŸ”¬" }] },
            { clues: ["She is <b>shy</b>.", "She is <b>kind</b>.", "She is our <b>art teacher</b>."], answer: "Miss White", profiles: [{ name: "Mr. Li", job: "Math Teacher", traits: ["old", "strict"], icon: "ğŸ‘¨â€ğŸ«" }, { name: "Miss White", job: "Art Teacher", traits: ["shy", "kind"], icon: "ğŸ‘©â€ğŸ¨" }, { name: "Mr. Wang", job: "PE Teacher", traits: ["strong"], icon: "ğŸ€" }, { name: "Ms. Green", job: "Music Teacher", traits: ["funny"], icon: "ğŸ‘©â€ğŸ¤" }] },
            { clues: ["I am <b>clever</b> and <b>strong</b>.", "I can <b>speak English</b>.", "I am a <b>robot</b>."], answer: "Robin", profiles: [{ name: "Mr. Black", job: "Principal", traits: ["old", "strict"], icon: "ğŸ‘´" }, { name: "Robin", job: "Robot", traits: ["clever", "strong"], icon: "ğŸ¤–" }, { name: "Mike", job: "Student", traits: ["young", "funny"], icon: "ğŸ§’" }, { name: "Sarah", job: "Student", traits: ["young", "helpful"], icon: "ğŸ‘§" }] },
            { clues: ["She is <b>helpful</b>.", "She is <b>polite</b>.", "She is a <b>student</b>."], answer: "Sarah", profiles: [{ name: "Sarah", job: "Student", traits: ["helpful", "polite"], icon: "ğŸ‘§" }, { name: "Wu Binbin", job: "Student", traits: ["hard-working", "clever"], icon: "ğŸ‘¦" }, { name: "Miss Chen", job: "Teacher", traits: ["young", "shy"], icon: "ğŸ‘©â€ğŸ«" }, { name: "Mr. Li", job: "Teacher", traits: ["old", "strict"], icon: "ğŸ‘¨â€ğŸ«" }] },
            { clues: ["He is <b>hard-working</b>.", "He is <b>clever</b>.", "He is a <b>student</b>."], answer: "Wu Binbin", profiles: [{ name: "Wu Binbin", job: "Student", traits: ["hard-working", "clever"], icon: "ğŸ‘¦" }, { name: "Oliver", job: "Student", traits: ["funny", "active"], icon: "ğŸ§’" }, { name: "Mr. Zhang", job: "Teacher", traits: ["young", "funny"], icon: "ğŸ‘¨â€ğŸ¤" }, { name: "Chen Jie", job: "Student", traits: ["quiet", "kind"], icon: "ğŸ‘§" }] },
            { clues: ["She is <b>quiet</b>.", "She is <b>kind</b>.", "She is a <b>student</b>."], answer: "Chen Jie", profiles: [{ name: "Chen Jie", job: "Student", traits: ["quiet", "kind"], icon: "ğŸ‘§" }, { name: "Sarah", job: "Student", traits: ["helpful", "polite"], icon: "ğŸ‘§" }, { name: "Miss White", job: "Teacher", traits: ["shy", "kind"], icon: "ğŸ‘©â€ğŸ¨" }, { name: "Robin", job: "Robot", traits: ["clever", "strong"], icon: "ğŸ¤–" }] },
            { clues: ["He is <b>funny</b>.", "He is <b>active</b>.", "He is a <b>student</b>."], answer: "Oliver", profiles: [{ name: "Oliver", job: "Student", traits: ["funny", "active"], icon: "ğŸ§’" }, { name: "John", job: "Student", traits: ["strong", "helpful"], icon: "ğŸ‘¦" }, { name: "Mr. Wu", job: "Teacher", traits: ["strong", "funny"], icon: "ğŸ€" }, { name: "Joe", job: "Student", traits: ["young", "shy"], icon: "ğŸ‘¦" }] },
            { clues: ["He is <b>strong</b>.", "He is <b>helpful</b>.", "He is a <b>student</b>."], answer: "John", profiles: [{ name: "John", job: "Student", traits: ["strong", "helpful"], icon: "ğŸ‘¦" }, { name: "Mr. Li", job: "Teacher", traits: ["old", "strict"], icon: "ğŸ‘¨â€ğŸ«" }, { name: "Robin", job: "Robot", traits: ["clever", "strong"], icon: "ğŸ¤–" }, { name: "Sarah", job: "Student", traits: ["helpful", "polite"], icon: "ğŸ‘§" }] },
            { clues: ["She is <b>young</b>.", "She is <b>shy</b>.", "She is our <b>Chinese teacher</b>."], answer: "Miss Chen", profiles: [{ name: "Miss Chen", job: "Chinese Teacher", traits: ["young", "shy"], icon: "ğŸ‘©â€ğŸ«" }, { name: "Mr. Li", job: "Math Teacher", traits: ["old", "strict"], icon: "ğŸ‘¨â€ğŸ«" }, { name: "Ms. Wang", job: "English Teacher", traits: ["kind"], icon: "ğŸ‘©â€ğŸ«" }, { name: "Mr. Wu", job: "PE Teacher", traits: ["strong"], icon: "ğŸ€" }] },
            { clues: ["He is <b>old</b>.", "He is <b>clever</b>.", "He is our <b>science teacher</b>."], answer: "Mr. Zhao", profiles: [{ name: "Mr. Zhao", job: "Science Teacher", traits: ["old", "clever"], icon: "ğŸ‘¨â€ğŸ”¬" }, { name: "Mr. Li", job: "Math Teacher", traits: ["strict"], icon: "ğŸ‘¨â€ğŸ«" }, { name: "Miss White", job: "Art Teacher", traits: ["shy"], icon: "ğŸ‘©â€ğŸ¨" }, { name: "Mr. Zhang", job: "Music Teacher", traits: ["funny"], icon: "ğŸ‘¨â€ğŸ¤" }] },
            { clues: ["He is <b>strong</b>.", "He is <b>funny</b>.", "He is our <b>PE teacher</b>."], answer: "Mr. Wu", profiles: [{ name: "Mr. Wu", job: "PE Teacher", traits: ["strong", "funny"], icon: "ğŸ€" }, { name: "Mr. Li", job: "Math Teacher", traits: ["old"], icon: "ğŸ‘¨â€ğŸ«" }, { name: "Ms. Wang", job: "English Teacher", traits: ["young"], icon: "ğŸ‘©â€ğŸ«" }, { name: "Robin", job: "Robot", traits: ["clever"], icon: "ğŸ¤–" }] },
            { clues: ["He is <b>young</b>.", "He is <b>funny</b>.", "He is a <b>student</b>."], answer: "Mike", profiles: [{ name: "Mike", job: "Student", traits: ["young", "funny"], icon: "ğŸ§’" }, { name: "Robin", job: "Robot", traits: ["strong"], icon: "ğŸ¤–" }, { name: "Mr. Zhang", job: "Teacher", traits: ["funny"], icon: "ğŸ‘¨â€ğŸ¤" }, { name: "Sarah", job: "Student", traits: ["helpful"], icon: "ğŸ‘§" }] },
            { clues: ["He is <b>tall</b>.", "He is <b>kind</b>.", "He is our <b>head teacher</b>."], answer: "Mr. Black", profiles: [{ name: "Mr. Black", job: "Principal", traits: ["tall", "kind"], icon: "ğŸ‘´" }, { name: "Mr. Li", job: "Math Teacher", traits: ["strict"], icon: "ğŸ‘¨â€ğŸ«" }, { name: "Miss Chen", job: "Teacher", traits: ["shy"], icon: "ğŸ‘©â€ğŸ«" }, { name: "Wu Binbin", job: "Student", traits: ["clever"], icon: "ğŸ‘¦" }] },
            { clues: ["She is <b>short</b>.", "She is <b>funny</b>.", "She is a <b>student</b>."], answer: "Amy", profiles: [{ name: "Amy", job: "Student", traits: ["short", "funny"], icon: "ğŸ‘§" }, { name: "Sarah", job: "Student", traits: ["tall", "helpful"], icon: "ğŸ‘§" }, { name: "Miss White", job: "Teacher", traits: ["kind"], icon: "ğŸ‘©â€ğŸ¨" }, { name: "John", job: "Student", traits: ["strong"], icon: "ğŸ‘¦" }] },
            { clues: ["He is <b>thin</b>.", "He is <b>friendly</b>.", "He is a <b>new student</b>."], answer: "Zhang Peng", profiles: [{ name: "Zhang Peng", job: "Student", traits: ["thin", "friendly"], icon: "ğŸ‘¦" }, { name: "Wu Binbin", job: "Student", traits: ["hard-working"], icon: "ğŸ‘¦" }, { name: "Mr. Wu", job: "Teacher", traits: ["strong"], icon: "ğŸ€" }, { name: "Robin", job: "Robot", traits: ["clever"], icon: "ğŸ¤–" }] },
            { clues: ["He is <b>young</b>.", "He is <b>funny</b>.", "He is our <b>science teacher</b>."], answer: "Mr. Jones", profiles: [{ name: "Mr. Jones", job: "Science Teacher", traits: ["young", "funny"], icon: "ğŸ‘¨â€ğŸ”¬" }, { name: "Mr. Li", job: "Math Teacher", traits: ["old"], icon: "ğŸ‘¨â€ğŸ«" }, { name: "Ms. Wang", job: "English Teacher", traits: ["kind"], icon: "ğŸ‘©â€ğŸ«" }, { name: "Oliver", job: "Student", traits: ["active"], icon: "ğŸ§’" }] },
            { clues: ["She is <b>old</b>.", "She is <b>very kind</b>.", "She is our <b>music teacher</b>."], answer: "Ms. Miller", profiles: [{ name: "Ms. Miller", job: "Music Teacher", traits: ["old", "kind"], icon: "ğŸ‘©â€ğŸ¤" }, { name: "Mr. Zhang", job: "Music Teacher", traits: ["young", "funny"], icon: "ğŸ‘¨â€ğŸ¤" }, { name: "Miss White", job: "Art Teacher", traits: ["shy"], icon: "ğŸ‘©â€ğŸ¨" }, { name: "Sarah", job: "Student", traits: ["helpful"], icon: "ğŸ‘§" }] },
            { clues: ["He is <b>tall</b>.", "He is <b>strong</b>.", "He is our <b>PE teacher</b>."], answer: "Mr. Taylor", profiles: [{ name: "Mr. Taylor", job: "PE Teacher", traits: ["tall", "strong"], icon: "ğŸ€" }, { name: "Mr. Wu", job: "PE Teacher", traits: ["funny"], icon: "ğŸ€" }, { name: "John", job: "Student", traits: ["strong"], icon: "ğŸ‘¦" }, { name: "Mr. Li", job: "Math Teacher", traits: ["strict"], icon: "ğŸ‘¨â€ğŸ«" }] }
        ],
        unit2: [
            { clues: ["It is the <b>first day</b> of the school week.", "We have <b>English class</b> today."], answer: "Monday", profiles: [{ name: "Monday", job: "Weekday", traits: ["first day", "English class"], icon: "ğŸ“…" }, { name: "Friday", job: "Weekday", traits: ["last day", "weekend soon"], icon: "ğŸ“…" }, { name: "Saturday", job: "Weekend", traits: ["no school", "play football"], icon: "ğŸ–ï¸" }, { name: "Sunday", job: "Weekend", traits: ["no school", "visit grandparents"], icon: "ğŸ–ï¸" }] },
            { clues: ["It is the <b>weekend</b>.", "I often <b>play football</b> today."], answer: "Saturday", profiles: [{ name: "Saturday", job: "Weekend", traits: ["no school", "play football"], icon: "âš½" }, { name: "Monday", job: "Weekday", traits: ["first day", "busy"], icon: "ğŸ“…" }, { name: "Wednesday", job: "Weekday", traits: ["midweek", "art class"], icon: "ğŸ“…" }, { name: "Thursday", job: "Weekday", traits: ["math class", "busy"], icon: "ğŸ“…" }] },
            { clues: ["It is the <b>weekend</b>.", "I often <b>visit my grandparents</b>."], answer: "Sunday", profiles: [{ name: "Sunday", job: "Weekend", traits: ["no school", "visit grandparents"], icon: "ğŸ‘µ" }, { name: "Friday", job: "Weekday", traits: ["last day", "English class"], icon: "ğŸ“…" }, { name: "Tuesday", job: "Weekday", traits: ["PE class", "strong"], icon: "ğŸ“…" }, { name: "Monday", job: "Weekday", traits: ["first day", "busy"], icon: "ğŸ“…" }] },
            { clues: ["It is the <b>last day</b> of the school week.", "I am very <b>happy</b>."], answer: "Friday", profiles: [{ name: "Friday", job: "Weekday", traits: ["last day", "happy"], icon: "ğŸ¥³" }, { name: "Monday", job: "Weekday", traits: ["first day", "busy"], icon: "ğŸ“…" }, { name: "Wednesday", job: "Weekday", traits: ["midweek", "art class"], icon: "ğŸ“…" }, { name: "Saturday", job: "Weekend", traits: ["no school", "play football"], icon: "ğŸ–ï¸" }] },
            { clues: ["It is the <b>midweek</b>.", "We have <b>art class</b> today."], answer: "Wednesday", profiles: [{ name: "Wednesday", job: "Weekday", traits: ["midweek", "art class"], icon: "ğŸ¨" }, { name: "Thursday", job: "Weekday", traits: ["math class", "busy"], icon: "ğŸ“…" }, { name: "Tuesday", job: "Weekday", traits: ["PE class", "strong"], icon: "ğŸ“…" }, { name: "Sunday", job: "Weekend", traits: ["no school", "visit grandparents"], icon: "ğŸ–ï¸" }] },
            { clues: ["We have <b>math class</b> today.", "I am very <b>busy</b>."], answer: "Thursday", profiles: [{ name: "Thursday", job: "Weekday", traits: ["math class", "busy"], icon: "ğŸ”¢" }, { name: "Saturday", job: "Weekend", traits: ["no school", "play football"], icon: "ğŸ–ï¸" }, { name: "Monday", job: "Weekday", traits: ["first day", "busy"], icon: "ğŸ“…" }, { name: "Friday", job: "Weekday", traits: ["last day", "happy"], icon: "ğŸ“…" }] },
            { clues: ["We have <b>PE class</b> today.", "I am <b>strong</b>."], answer: "Tuesday", profiles: [{ name: "Tuesday", job: "Weekday", traits: ["PE class", "strong"], icon: "ğŸƒ" }, { name: "Monday", job: "Weekday", traits: ["first day", "busy"], icon: "ğŸ“…" }, { name: "Wednesday", job: "Weekday", traits: ["midweek", "art class"], icon: "ğŸ“…" }, { name: "Saturday", job: "Weekend", traits: ["no school", "play football"], icon: "ğŸ–ï¸" }] },
            { clues: ["It is <b>Saturday and Sunday</b>.", "We <b>don't go to school</b>."], answer: "Weekend", profiles: [{ name: "Weekend", job: "Time", traits: ["no school", "happy"], icon: "ğŸ¡" }, { name: "Monday", job: "Weekday", traits: ["first day", "busy"], icon: "ğŸ“…" }, { name: "Friday", job: "Weekday", traits: ["last day", "English class"], icon: "ğŸ“…" }, { name: "Thursday", job: "Weekday", traits: ["math class", "busy"], icon: "ğŸ“…" }] },
            { clues: ["I do this <b>at home</b>.", "I often do this <b>on the weekend</b>.", "I use a <b>TV</b>."], answer: "Watch TV", profiles: [{ name: "Watch TV", job: "Activity", traits: ["at home", "weekend"], icon: "ğŸ“º" }, { name: "Do homework", job: "Activity", traits: ["at home", "evening"], icon: "ğŸ“" }, { name: "Play football", job: "Activity", traits: ["in the park", "weekend"], icon: "âš½" }, { name: "Read books", job: "Activity", traits: ["at home", "quiet"], icon: "ğŸ“š" }] },
            { clues: ["I do this <b>in the evening</b>.", "I do this <b>every day</b>.", "I use my <b>pen</b>."], answer: "Do homework", profiles: [{ name: "Do homework", job: "Activity", traits: ["evening", "every day"], icon: "ğŸ“" }, { name: "Wash my clothes", job: "Activity", traits: ["weekend", "helpful"], icon: "ğŸ‘•" }, { name: "Watch TV", job: "Activity", traits: ["home", "weekend"], icon: "ğŸ“º" }, { name: "Play football", job: "Activity", traits: ["park", "weekend"], icon: "âš½" }] },
            { clues: ["I do this <b>on the weekend</b>.", "I make my <b>clothes clean</b>."], answer: "Wash clothes", profiles: [{ name: "Wash clothes", job: "Activity", traits: ["clean", "helpful"], icon: "ğŸ‘•" }, { name: "Watch TV", job: "Activity", traits: ["weekend"], icon: "ğŸ“º" }, { name: "Play football", job: "Activity", traits: ["sport"], icon: "âš½" }, { name: "Read books", job: "Activity", traits: ["quiet"], icon: "ğŸ“š" }] },
            { clues: ["I do this <b>in the library</b>.", "I like <b>stories</b>."], answer: "Read books", profiles: [{ name: "Read books", job: "Activity", traits: ["library", "quiet"], icon: "ğŸ“š" }, { name: "Play football", job: "Activity", traits: ["sport"], icon: "âš½" }, { name: "Watch TV", job: "Activity", traits: ["home"], icon: "ğŸ“º" }, { name: "Do homework", job: "Activity", traits: ["pen"], icon: "ğŸ“" }] },
            { clues: ["I do this <b>in the park</b>.", "I use a <b>ball</b>."], answer: "Play football", profiles: [{ name: "Play football", job: "Activity", traits: ["park", "ball"], icon: "âš½" }, { name: "Read books", job: "Activity", traits: ["quiet"], icon: "ğŸ“š" }, { name: "Watch TV", job: "Activity", traits: ["TV"], icon: "ğŸ“º" }, { name: "Wash clothes", job: "Activity", traits: ["water"], icon: "ğŸ‘•" }] },
            { clues: ["I do this <b>on the weekend</b>.", "I help my <b>mother</b> at home."], answer: "Clean the room", profiles: [{ name: "Clean the room", job: "Activity", traits: ["helpful", "clean"], icon: "ğŸ§¹" }, { name: "Watch TV", job: "Activity", traits: ["rest"], icon: "ğŸ“º" }, { name: "Play football", job: "Activity", traits: ["active"], icon: "âš½" }, { name: "Do homework", job: "Activity", traits: ["study"], icon: "ğŸ“" }] },
            { clues: ["We have <b>music class</b> today.", "We can <b>sing</b>."], answer: "Music Day", profiles: [{ name: "Music Day", job: "Weekday", traits: ["sing", "songs"], icon: "ğŸµ" }, { name: "Math Day", job: "Weekday", traits: ["numbers"], icon: "ğŸ”¢" }, { name: "Art Day", job: "Weekday", traits: ["draw"], icon: "ğŸ¨" }, { name: "PE Day", job: "Weekday", traits: ["run"], icon: "ğŸƒ" }] },
            { clues: ["I often <b>play sports</b>.", "I am very <b>active</b> on this day."], answer: "PE Day", profiles: [{ name: "PE Day", job: "Weekday", traits: ["sports", "run"], icon: "ğŸƒ" }, { name: "Music Day", job: "Weekday", traits: ["sing"], icon: "ğŸµ" }, { name: "Art Day", job: "Weekday", traits: ["draw"], icon: "ğŸ¨" }, { name: "Math Day", job: "Weekday", traits: ["study"], icon: "ğŸ”¢" }] },
            { clues: ["We have <b>Chinese class</b>.", "We <b>read poems</b>."], answer: "Chinese Day", profiles: [{ name: "Chinese Day", job: "Weekday", traits: ["read", "poems"], icon: "ğŸ“–" }, { name: "English Day", job: "Weekday", traits: ["speak"], icon: "ğŸ—£ï¸" }, { name: "Math Day", job: "Weekday", traits: ["numbers"], icon: "ğŸ”¢" }, { name: "Art Day", job: "Weekday", traits: ["draw"], icon: "ğŸ¨" }] },
            { clues: ["I go to the <b>park</b>.", "I often do this on the <b>weekend</b>."], answer: "Go to the park", profiles: [{ name: "Go to the park", job: "Activity", traits: ["park", "weekend"], icon: "ğŸï¸" }, { name: "Watch TV", job: "Activity", traits: ["home"], icon: "ğŸ“º" }, { name: "Do homework", job: "Activity", traits: ["pen"], icon: "ğŸ“" }, { name: "Wash clothes", job: "Activity", traits: ["clean"], icon: "ğŸ‘•" }] },
            { clues: ["I <b>listen to music</b>.", "I do this <b>at home</b>."], answer: "Listen to music", profiles: [{ name: "Listen to music", job: "Activity", traits: ["music", "home"], icon: "ğŸ§" }, { name: "Read books", job: "Activity", traits: ["quiet"], icon: "ğŸ“š" }, { name: "Play football", job: "Activity", traits: ["sport"], icon: "âš½" }, { name: "Cook", job: "Activity", traits: ["delicious"], icon: "ğŸ³" }] },
            { clues: ["I <b>do exercise</b>.", "I do this <b>in the morning</b>."], answer: "Do exercise", profiles: [{ name: "Do exercise", job: "Activity", traits: ["morning", "strong"], icon: "ğŸ’ª" }, { name: "Watch TV", job: "Activity", traits: ["evening"], icon: "ğŸ“º" }, { name: "Do homework", job: "Activity", traits: ["study"], icon: "ğŸ“" }, { name: "Sleep", job: "Activity", traits: ["night"], icon: "ğŸ’¤" }] }
        ],
        unit3: [
            { clues: ["I am <b>healthy</b>.", "I have <b>bread and vegetables</b>.", "I am <b>delicious</b>."], answer: "Sandwich", profiles: [{ name: "Sandwich", job: "Food", traits: ["healthy", "delicious"], icon: "ğŸ¥ª" }, { name: "Hamburger", job: "Food", traits: ["delicious", "hot"], icon: "ğŸ”" }, { name: "Ice Cream", job: "Food", traits: ["sweet", "cold"], icon: "ğŸ¦" }, { name: "Salad", job: "Food", traits: ["fresh", "healthy"], icon: "ğŸ¥—" }] },
            { clues: ["I am <b>sweet</b>.", "I am <b>cold</b>.", "I am <b>delicious</b>."], answer: "Ice cream", profiles: [{ name: "Ice cream", job: "Food", traits: ["sweet", "cold"], icon: "ğŸ¦" }, { name: "Tea", job: "Drink", traits: ["hot", "healthy"], icon: "ğŸµ" }, { name: "Sandwich", job: "Food", traits: ["healthy", "delicious"], icon: "ğŸ¥ª" }, { name: "Salad", job: "Food", traits: ["fresh", "healthy"], icon: "ğŸ¥—" }] },
            { clues: ["I am <b>fresh</b>.", "I am <b>healthy</b>.", "I have many <b>vegetables</b>."], answer: "Salad", profiles: [{ name: "Salad", job: "Food", traits: ["fresh", "healthy"], icon: "ğŸ¥—" }, { name: "Ice cream", job: "Food", traits: ["sweet", "cold"], icon: "ğŸ¦" }, { name: "Hamburger", job: "Food", traits: ["delicious", "hot"], icon: "ğŸ”" }, { name: "Tea", job: "Drink", traits: ["hot", "healthy"], icon: "ğŸµ" }] },
            { clues: ["I am <b>delicious</b>.", "I am <b>hot</b>.", "I have <b>meat and bread</b>."], answer: "Hamburger", profiles: [{ name: "Hamburger", job: "Food", traits: ["delicious", "hot"], icon: "ğŸ”" }, { name: "Ice cream", job: "Food", traits: ["sweet", "cold"], icon: "ğŸ¦" }, { name: "Salad", job: "Food", traits: ["fresh", "healthy"], icon: "ğŸ¥—" }, { name: "Sandwich", job: "Food", traits: ["healthy", "delicious"], icon: "ğŸ¥ª" }] },
            { clues: ["I am a <b>drink</b>.", "I am <b>hot</b>.", "I am <b>healthy</b>."], answer: "Tea", profiles: [{ name: "Tea", job: "Drink", traits: ["hot", "healthy"], icon: "ğŸµ" }, { name: "Water", job: "Drink", traits: ["healthy", "fresh"], icon: "ğŸ’§" }, { name: "Milk", job: "Drink", traits: ["white", "healthy"], icon: "ğŸ¥›" }, { name: "Juice", job: "Drink", traits: ["sweet", "fresh"], icon: "ğŸ¹" }] },
            { clues: ["I am a <b>drink</b>.", "I am <b>healthy</b>.", "I am <b>fresh</b>."], answer: "Water", profiles: [{ name: "Water", job: "Drink", traits: ["healthy", "fresh"], icon: "ğŸ’§" }, { name: "Tea", job: "Drink", traits: ["hot", "healthy"], icon: "ğŸµ" }, { name: "Ice cream", job: "Food", traits: ["sweet", "cold"], icon: "ğŸ¦" }, { name: "Hamburger", job: "Food", traits: ["delicious", "hot"], icon: "ğŸ”" }] },
            { clues: ["I am a <b>fruit</b>.", "I am <b>sweet</b>.", "I am <b>purple or green</b>."], answer: "Grapes", profiles: [{ name: "Grapes", job: "Fruit", traits: ["sweet", "purple"], icon: "ğŸ‡" }, { name: "Apple", job: "Fruit", traits: ["red", "sweet"], icon: "ğŸ" }, { name: "Banana", job: "Fruit", traits: ["yellow", "sweet"], icon: "ğŸŒ" }, { name: "Orange", job: "Fruit", traits: ["orange", "fresh"], icon: "ğŸŠ" }] },
            { clues: ["I am <b>delicious</b>.", "I am <b>meat</b>.", "I am <b>brown</b>."], answer: "Beef", profiles: [{ name: "Beef", job: "Food", traits: ["delicious", "meat"], icon: "ğŸ¥©" }, { name: "Chicken", job: "Food", traits: ["delicious", "white meat"], icon: "ğŸ—" }, { name: "Salad", job: "Food", traits: ["fresh", "healthy"], icon: "ğŸ¥—" }, { name: "Ice cream", job: "Food", traits: ["sweet", "cold"], icon: "ğŸ¦" }] },
            { clues: ["We are <b>healthy</b>.", "We are <b>fresh</b>.", "We are <b>green</b>."], answer: "Vegetables", profiles: [{ name: "Vegetables", job: "Food", traits: ["healthy", "fresh"], icon: "ğŸ¥¦" }, { name: "Ice cream", job: "Food", traits: ["sweet", "cold"], icon: "ğŸ¦" }, { name: "Hamburger", job: "Food", traits: ["delicious", "hot"], icon: "ğŸ”" }, { name: "Beef", job: "Food", traits: ["delicious", "meat"], icon: "ğŸ¥©" }] },
            { clues: ["I am <b>sweet</b> and <b>healthy</b>.", "I have many <b>fruits</b> in me."], answer: "Fruit Salad", profiles: [{ name: "Fruit Salad", job: "Food", traits: ["sweet", "healthy"], icon: "ğŸ¥—" }, { name: "Ice cream", job: "Food", traits: ["sweet", "cold"], icon: "ğŸ¦" }, { name: "Tea", job: "Drink", traits: ["hot", "healthy"], icon: "ğŸµ" }, { name: "Sandwich", job: "Food", traits: ["healthy", "delicious"], icon: "ğŸ¥ª" }] },
            { clues: ["I am <b>hot</b>.", "I have <b>noodles and vegetables</b>.", "I am <b>delicious</b>."], answer: "Noodle Soup", profiles: [{ name: "Noodle Soup", job: "Food", traits: ["hot", "delicious"], icon: "ğŸœ" }, { name: "Tea", job: "Drink", traits: ["hot"], icon: "ğŸµ" }, { name: "Ice cream", job: "Food", traits: ["cold"], icon: "ğŸ¦" }, { name: "Water", job: "Drink", traits: ["fresh"], icon: "ğŸ’§" }] },
            { clues: ["I am <b>white</b>.", "I am a <b>healthy drink</b>.", "I come from <b>cows</b>."], answer: "Milk", profiles: [{ name: "Milk", job: "Drink", traits: ["white", "healthy"], icon: "ğŸ¥›" }, { name: "Water", job: "Drink", traits: ["fresh"], icon: "ğŸ’§" }, { name: "Juice", job: "Drink", traits: ["sweet"], icon: "ğŸ¹" }, { name: "Tea", job: "Drink", traits: ["hot"], icon: "ğŸµ" }] },
            { clues: ["I am <b>sweet</b>.", "I am <b>fresh</b>.", "I am made of <b>oranges</b>."], answer: "Juice", profiles: [{ name: "Juice", job: "Drink", traits: ["sweet", "fresh"], icon: "ğŸ¹" }, { name: "Water", job: "Drink", traits: ["healthy"], icon: "ğŸ’§" }, { name: "Milk", job: "Drink", traits: ["white"], icon: "ğŸ¥›" }, { name: "Tea", job: "Drink", traits: ["hot"], icon: "ğŸµ" }] },
            { clues: ["I am <b>yellow</b>.", "I am a <b>fruit</b>.", "I am <b>long</b>."], answer: "Banana", profiles: [{ name: "Banana", job: "Fruit", traits: ["yellow", "long"], icon: "ğŸŒ" }, { name: "Apple", job: "Fruit", traits: ["red"], icon: "ğŸ" }, { name: "Grapes", job: "Fruit", traits: ["purple"], icon: "ğŸ‡" }, { name: "Orange", job: "Fruit", traits: ["round"], icon: "ğŸŠ" }] },
            { clues: ["I am <b>red</b>.", "I am <b>round</b>.", "I am <b>sweet</b>."], answer: "Apple", profiles: [{ name: "Apple", job: "Fruit", traits: ["red", "sweet"], icon: "ğŸ" }, { name: "Banana", job: "Fruit", traits: ["yellow"], icon: "ğŸŒ" }, { name: "Grapes", job: "Fruit", traits: ["green"], icon: "ğŸ‡" }, { name: "Sandwich", job: "Food", traits: ["bread"], icon: "ğŸ¥ª" }] },
            { clues: ["I am <b>orange</b>.", "I am <b>round</b>.", "I am <b>fresh</b>."], answer: "Orange", profiles: [{ name: "Orange", job: "Fruit", traits: ["orange", "fresh"], icon: "ğŸŠ" }, { name: "Apple", job: "Fruit", traits: ["red"], icon: "ğŸ" }, { name: "Banana", job: "Fruit", traits: ["long"], icon: "ğŸŒ" }, { name: "Juice", job: "Drink", traits: ["sweet"], icon: "ğŸ¹" }] },
            { clues: ["I am <b>delicious</b>.", "I am <b>white meat</b>.", "I have <b>wings</b>."], answer: "Chicken", profiles: [{ name: "Chicken", job: "Food", traits: ["delicious", "white meat"], icon: "ğŸ—" }, { name: "Beef", job: "Food", traits: ["meat"], icon: "ğŸ¥©" }, { name: "Salad", job: "Food", traits: ["healthy"], icon: "ğŸ¥—" }, { name: "Ice cream", job: "Food", traits: ["sweet"], icon: "ğŸ¦" }] },
            { clues: ["I am <b>delicious</b>.", "I live in the <b>water</b>.", "I am <b>healthy</b>."], answer: "Fish", profiles: [{ name: "Fish", job: "Food", traits: ["water", "healthy"], icon: "ğŸŸ" }, { name: "Chicken", job: "Food", traits: ["wings"], icon: "ğŸ—" }, { name: "Beef", job: "Food", traits: ["meat"], icon: "ğŸ¥©" }, { name: "Hamburger", job: "Food", traits: ["hot"], icon: "ğŸ”" }] },
            { clues: ["I am <b>brown</b>.", "I am made of <b>flour</b>.", "I am <b>healthy</b>."], answer: "Bread", profiles: [{ name: "Bread", job: "Food", traits: ["flour", "healthy"], icon: "ğŸ" }, { name: "Sandwich", job: "Food", traits: ["bread"], icon: "ğŸ¥ª" }, { name: "Hamburger", job: "Food", traits: ["meat"], icon: "ğŸ”" }, { name: "Ice cream", job: "Food", traits: ["sweet"], icon: "ğŸ¦" }] },
            { clues: ["I am <b>hot</b>.", "I am <b>tasty</b>.", "I have <b>vegetables</b> in me."], answer: "Soup", profiles: [{ name: "Soup", job: "Food", traits: ["hot", "tasty"], icon: "ğŸ¥£" }, { name: "Water", job: "Drink", traits: ["fresh"], icon: "ğŸ’§" }, { name: "Juice", job: "Drink", traits: ["sweet"], icon: "ğŸ¹" }, { name: "Tea", job: "Drink", traits: ["hot"], icon: "ğŸµ" }] }
        ],
        unit4: [
            { clues: ["I can do this with <b>music</b>.", "I am <b>happy</b>."], answer: "Dance", profiles: [{ name: "Dance", job: "Ability", traits: ["music", "happy"], icon: "ğŸ’ƒ" }, { name: "Sing", job: "Ability", traits: ["songs", "music"], icon: "ğŸ¤" }, { name: "Swim", job: "Ability", traits: ["water", "cool"], icon: "ğŸŠ" }, { name: "Cook", job: "Ability", traits: ["food", "delicious"], icon: "ğŸ³" }] },
            { clues: ["I can do this in the <b>water</b>.", "I am <b>cool</b>."], answer: "Swim", profiles: [{ name: "Swim", job: "Ability", traits: ["water", "cool"], icon: "ğŸŠ" }, { name: "Dance", job: "Ability", traits: ["music", "happy"], icon: "ğŸ’ƒ" }, { name: "Play football", job: "Ability", traits: ["park", "weekend"], icon: "âš½" }, { name: "Sing", job: "Ability", traits: ["songs", "music"], icon: "ğŸ¤" }] },
            { clues: ["I can sing many <b>songs</b>.", "I like <b>music</b>."], answer: "Sing", profiles: [{ name: "Sing", job: "Ability", traits: ["songs", "music"], icon: "ğŸ¤" }, { name: "Dance", job: "Ability", traits: ["music", "happy"], icon: "ğŸ’ƒ" }, { name: "Speak English", job: "Ability", traits: ["language", "clever"], icon: "ğŸ—£ï¸" }, { name: "Draw cartoons", job: "Ability", traits: ["art", "funny"], icon: "ğŸ¨" }] },
            { clues: ["I am <b>strong</b>.", "I can do this in the <b>gym</b>."], answer: "Do kung fu", profiles: [{ name: "Do kung fu", job: "Ability", traits: ["strong", "gym"], icon: "ğŸ¥‹" }, { name: "Play basketball", job: "Ability", traits: ["sports", "strong"], icon: "ğŸ€" }, { name: "Swim", job: "Ability", traits: ["water", "cool"], icon: "ğŸŠ" }, { name: "Cook", job: "Ability", traits: ["food", "delicious"], icon: "ğŸ³" }] },
            { clues: ["I like <b>art</b>.", "I can make <b>funny pictures</b>."], answer: "Draw cartoons", profiles: [{ name: "Draw cartoons", job: "Ability", traits: ["art", "funny"], icon: "ğŸ¨" }, { name: "Sing", job: "Ability", traits: ["songs", "music"], icon: "ğŸ¤" }, { name: "Dance", job: "Ability", traits: ["music", "happy"], icon: "ğŸ’ƒ" }, { name: "Cook", job: "Ability", traits: ["food", "delicious"], icon: "ğŸ³" }] },
            { clues: ["I am <b>helpful</b>.", "I can make <b>delicious food</b>."], answer: "Cook", profiles: [{ name: "Cook", job: "Ability", traits: ["helpful", "delicious"], icon: "ğŸ³" }, { name: "Swim", job: "Ability", traits: ["water", "cool"], icon: "ğŸŠ" }, { name: "Sing", job: "Ability", traits: ["songs", "music"], icon: "ğŸ¤" }, { name: "Dance", job: "Ability", traits: ["music", "happy"], icon: "ğŸ’ƒ" }] },
            { clues: ["I am <b>clever</b>.", "I can speak a <b>foreign language</b>."], answer: "Speak English", profiles: [{ name: "Speak English", job: "Ability", traits: ["clever", "language"], icon: "ğŸ—£ï¸" }, { name: "Sing", job: "Ability", traits: ["songs", "music"], icon: "ğŸ¤" }, { name: "Draw cartoons", job: "Ability", traits: ["art", "funny"], icon: "ğŸ¨" }, { name: "Dance", job: "Ability", traits: ["music", "happy"], icon: "ğŸ’ƒ" }] },
            { clues: ["I am <b>strong</b>.", "I can play this <b>sport</b>.", "I use a <b>big ball</b>."], answer: "Play basketball", profiles: [{ name: "Play basketball", job: "Ability", traits: ["strong", "sport"], icon: "ğŸ€" }, { name: "Play ping-pong", job: "Ability", traits: ["sport", "funny"], icon: "ğŸ“" }, { name: "Play football", job: "Ability", traits: ["sport", "weekend"], icon: "âš½" }, { name: "Swim", job: "Ability", traits: ["water", "cool"], icon: "ğŸŠ" }] },
            { clues: ["I can play this <b>sport</b>.", "I use a <b>small ball</b>.", "It is <b>funny</b>."], answer: "Play ping-pong", profiles: [{ name: "Play ping-pong", job: "Ability", traits: ["sport", "small ball"], icon: "ğŸ“" }, { name: "Play basketball", job: "Ability", traits: ["strong", "sport"], icon: "ğŸ€" }, { name: "Dance", job: "Ability", traits: ["music", "happy"], icon: "ğŸ’ƒ" }, { name: "Sing", job: "Ability", traits: ["songs", "music"], icon: "ğŸ¤" }] },
            { clues: ["I am <b>helpful</b>.", "I do this <b>at home</b>.", "My room is <b>clean</b>."], answer: "Clean the room", profiles: [{ name: "Clean the room", job: "Ability", traits: ["helpful", "at home"], icon: "ğŸ§¹" }, { name: "Cook", job: "Ability", traits: ["helpful", "delicious"], icon: "ğŸ³" }, { name: "Do homework", job: "Ability", traits: ["evening", "clever"], icon: "ğŸ“" }, { name: "Watch TV", job: "Ability", traits: ["home", "weekend"], icon: "ğŸ“º" }] },
            { clues: ["I can <b>draw</b> very well.", "I use many <b>colors</b>."], answer: "Draw", profiles: [{ name: "Draw", job: "Ability", traits: ["colors", "art"], icon: "ğŸ¨" }, { name: "Sing", job: "Ability", traits: ["songs"], icon: "ğŸ¤" }, { name: "Dance", job: "Ability", traits: ["music"], icon: "ğŸ’ƒ" }, { name: "Swim", job: "Ability", traits: ["water"], icon: "ğŸŠ" }] },
            { clues: ["I can play this <b>instrument</b>.", "It has <b>keys</b>."], answer: "Play piano", profiles: [{ name: "Play piano", job: "Ability", traits: ["keys", "music"], icon: "ğŸ¹" }, { name: "Play guitar", job: "Ability", traits: ["strings"], icon: "ğŸ¸" }, { name: "Sing", job: "Ability", traits: ["songs"], icon: "ğŸ¤" }, { name: "Dance", job: "Ability", traits: ["happy"], icon: "ğŸ’ƒ" }] },
            { clues: ["I am <b>clever</b>.", "I can do <b>puzzles</b>."], answer: "Do puzzles", profiles: [{ name: "Do puzzles", job: "Ability", traits: ["clever", "thinking"], icon: "ğŸ§©" }, { name: "Play football", job: "Ability", traits: ["sport"], icon: "âš½" }, { name: "Sing", job: "Ability", traits: ["songs"], icon: "ğŸ¤" }, { name: "Swim", job: "Ability", traits: ["water"], icon: "ğŸŠ" }] },
            { clues: ["I can play this <b>instrument</b>.", "It has <b>strings</b>."], answer: "Play guitar", profiles: [{ name: "Play guitar", job: "Ability", traits: ["strings", "music"], icon: "ğŸ¸" }, { name: "Play piano", job: "Ability", traits: ["keys"], icon: "ğŸ¹" }, { name: "Sing", job: "Ability", traits: ["songs"], icon: "ğŸ¤" }, { name: "Dance", job: "Ability", traits: ["happy"], icon: "ğŸ’ƒ" }] },
            { clues: ["I can <b>help</b> my mother.", "I <b>wash the dishes</b>."], answer: "Wash dishes", profiles: [{ name: "Wash dishes", job: "Ability", traits: ["helpful", "kitchen"], icon: "ğŸ½ï¸" }, { name: "Cook", job: "Ability", traits: ["delicious"], icon: "ğŸ³" }, { name: "Clean the room", job: "Ability", traits: ["broom"], icon: "ğŸ§¹" }, { name: "Swim", job: "Ability", traits: ["water"], icon: "ğŸŠ" }] },
            { clues: ["I can <b>speak</b> to people.", "I use <b>Chinese</b>."], answer: "Speak Chinese", profiles: [{ name: "Speak Chinese", job: "Ability", traits: ["language", "speak"], icon: "ğŸ—£ï¸" }, { name: "Speak English", job: "Ability", traits: ["foreign"], icon: "ğŸ—£ï¸" }, { name: "Sing", job: "Ability", traits: ["music"], icon: "ğŸ¤" }, { name: "Draw", job: "Ability", traits: ["art"], icon: "ğŸ¨" }] },
            { clues: ["I am <b>helpful</b>.", "I <b>make the bed</b>."], answer: "Make the bed", profiles: [{ name: "Make the bed", job: "Ability", traits: ["helpful", "bedroom"], icon: "ğŸ›ï¸" }, { name: "Clean the room", job: "Ability", traits: ["clean"], icon: "ğŸ§¹" }, { name: "Cook", job: "Ability", traits: ["food"], icon: "ğŸ³" }, { name: "Dance", job: "Ability", traits: ["happy"], icon: "ğŸ’ƒ" }] },
            { clues: ["I can play this <b>instrument</b>.", "It is a <b>Chinese instrument</b>."], answer: "Play the pipa", profiles: [{ name: "Play the pipa", job: "Ability", traits: ["Chinese", "music"], icon: "ğŸª•" }, { name: "Play piano", job: "Ability", traits: ["keys"], icon: "ğŸ¹" }, { name: "Play guitar", job: "Ability", traits: ["strings"], icon: "ğŸ¸" }, { name: "Sing", job: "Ability", traits: ["songs"], icon: "ğŸ¤" }] },
            { clues: ["I am <b>helpful</b>.", "I <b>clean the windows</b>."], answer: "Clean the windows", profiles: [{ name: "Clean the windows", job: "Ability", traits: ["helpful", "clean"], icon: "ğŸªŸ" }, { name: "Clean the room", job: "Ability", traits: ["broom"], icon: "ğŸ§¹" }, { name: "Cook", job: "Ability", traits: ["delicious"], icon: "ğŸ³" }, { name: "Swim", job: "Ability", traits: ["water"], icon: "ğŸŠ" }] },
            { clues: ["I am <b>kind</b>.", "I <b>help my parents</b> at home."], answer: "Help parents", profiles: [{ name: "Help parents", job: "Ability", traits: ["kind", "helpful"], icon: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§" }, { name: "Do homework", job: "Ability", traits: ["study"], icon: "ğŸ“" }, { name: "Watch TV", job: "Ability", traits: ["home"], icon: "ğŸ“º" }, { name: "Sing", job: "Ability", traits: ["music"], icon: "ğŸ¤" }] }
        ],
        unit5: [
            { clues: ["I am <b>on the wall</b>.", "I can <b>tell you the time</b>."], answer: "Clock", profiles: [{ name: "Clock", job: "Object", traits: ["on the wall", "time"], icon: "â°" }, { name: "Photo", job: "Object", traits: ["on the wall", "nice"], icon: "ğŸ–¼ï¸" }, { name: "Plant", job: "Object", traits: ["green", "fresh"], icon: "ğŸª´" }, { name: "Water bottle", job: "Object", traits: ["on the desk", "drink"], icon: "ğŸ¼" }] },
            { clues: ["I am <b>beside the window</b>.", "I am <b>green</b>."], answer: "Plant", profiles: [{ name: "Plant", job: "Object", traits: ["beside window", "green"], icon: "ğŸª´" }, { name: "Clock", job: "Object", traits: ["on the wall", "time"], icon: "â°" }, { name: "Desk", job: "Object", traits: ["study", "front of chair"], icon: "ğŸ“–" }, { name: "Bed", job: "Object", traits: ["sleep", "bedroom"], icon: "ğŸ›ï¸" }] },
            { clues: ["I am <b>on the desk</b>.", "I have <b>water</b> in me."], answer: "Water bottle", profiles: [{ name: "Water bottle", job: "Object", traits: ["on the desk", "water"], icon: "ğŸ¼" }, { name: "Computer", job: "Object", traits: ["on the desk", "play games"], icon: "ğŸ’»" }, { name: "Plant", job: "Object", traits: ["green", "fresh"], icon: "ğŸª´" }, { name: "Clock", job: "Object", traits: ["on the wall", "time"], icon: "â°" }] },
            { clues: ["I am <b>above the bed</b>.", "I am <b>nice</b>."], answer: "Photo", profiles: [{ name: "Photo", job: "Object", traits: ["above the bed", "nice"], icon: "ğŸ–¼ï¸" }, { name: "Clock", job: "Object", traits: ["on the wall", "time"], icon: "â°" }, { name: "Mirror", job: "Object", traits: ["bathroom", "see yourself"], icon: "ğŸª" }, { name: "Bed", job: "Object", traits: ["sleep", "bedroom"], icon: "ğŸ›ï¸" }] },
            { clues: ["I am <b>in the bedroom</b>.", "I am for <b>sleeping</b>."], answer: "Bed", profiles: [{ name: "Bed", job: "Object", traits: ["bedroom", "sleep"], icon: "ğŸ›ï¸" }, { name: "Desk", job: "Object", traits: ["study", "front of chair"], icon: "ğŸ“–" }, { name: "Chair", job: "Object", traits: ["sit", "beside desk"], icon: "ğŸª‘" }, { name: "Clock", job: "Object", traits: ["on the wall", "time"], icon: "â°" }] },
            { clues: ["I am <b>in front of the chair</b>.", "I am for <b>studying</b>."], answer: "Desk", profiles: [{ name: "Desk", job: "Object", traits: ["front of chair", "study"], icon: "ğŸ“–" }, { name: "Bed", job: "Object", traits: ["bedroom", "sleep"], icon: "ğŸ›ï¸" }, { name: "Bike", job: "Object", traits: ["fast", "behind door"], icon: "ğŸš²" }, { name: "Computer", job: "Object", traits: ["on the desk", "play games"], icon: "ğŸ’»" }] },
            { clues: ["I am <b>beside the desk</b>.", "I am for <b>sitting</b>."], answer: "Chair", profiles: [{ name: "Chair", job: "Object", traits: ["beside desk", "sit"], icon: "ğŸª‘" }, { name: "Bed", job: "Object", traits: ["bedroom", "sleep"], icon: "ğŸ›ï¸" }, { name: "Desk", job: "Object", traits: ["study", "front of chair"], icon: "ğŸ“–" }, { name: "Plant", job: "Object", traits: ["green", "fresh"], icon: "ğŸª´" }] },
            { clues: ["I am <b>on the desk</b>.", "I can <b>play games</b> and <b>study</b>."], answer: "Computer", profiles: [{ name: "Computer", job: "Object", traits: ["on the desk", "study"], icon: "ğŸ’»" }, { name: "TV", job: "Object", traits: ["watch", "home"], icon: "ğŸ“º" }, { name: "Water bottle", job: "Object", traits: ["on the desk", "water"], icon: "ğŸ¼" }, { name: "Clock", job: "Object", traits: ["on the wall", "time"], icon: "â°" }] },
            { clues: ["I am <b>behind the door</b>.", "I am <b>fast</b>."], answer: "Bike", profiles: [{ name: "Bike", job: "Object", traits: ["behind door", "fast"], icon: "ğŸš²" }, { name: "Bed", job: "Object", traits: ["bedroom", "sleep"], icon: "ğŸ›ï¸" }, { name: "Desk", job: "Object", traits: ["study", "front of chair"], icon: "ğŸ“–" }, { name: "Plant", job: "Object", traits: ["green", "fresh"], icon: "ğŸª´" }] },
            { clues: ["I am <b>in the bathroom</b>.", "You can <b>see yourself</b> in me."], answer: "Mirror", profiles: [{ name: "Mirror", job: "Object", traits: ["bathroom", "see yourself"], icon: "ğŸª" }, { name: "Photo", job: "Object", traits: ["above the bed", "nice"], icon: "ğŸ–¼ï¸" }, { name: "Clock", job: "Object", traits: ["on the wall", "time"], icon: "â°" }, { name: "Water bottle", job: "Object", traits: ["on the desk", "water"], icon: "ğŸ¼" }] },
            { clues: ["I am <b>under the bed</b>.", "I am <b>round</b>.", "I am <b>soft</b>."], answer: "Ball", profiles: [{ name: "Ball", job: "Object", traits: ["under bed", "soft"], icon: "âš½" }, { name: "Clock", job: "Object", traits: ["wall"], icon: "â°" }, { name: "Plant", job: "Object", traits: ["green"], icon: "ğŸª´" }, { name: "Desk", job: "Object", traits: ["study"], icon: "ğŸ“–" }] },
            { clues: ["I am <b>above the desk</b>.", "I am <b>bright</b>."], answer: "Lamp", profiles: [{ name: "Lamp", job: "Object", traits: ["above desk", "bright"], icon: "ğŸ’¡" }, { name: "Clock", job: "Object", traits: ["time"], icon: "â°" }, { name: "Photo", job: "Object", traits: ["nice"], icon: "ğŸ–¼ï¸" }, { name: "Mirror", job: "Object", traits: ["bathroom"], icon: "ğŸª" }] },
            { clues: ["I am <b>on the wall</b>.", "I have many <b>colors</b>.", "I am a <b>map</b>."], answer: "Map", profiles: [{ name: "Map", job: "Object", traits: ["on the wall", "colors"], icon: "ğŸ—ºï¸" }, { name: "Clock", job: "Object", traits: ["time"], icon: "â°" }, { name: "Photo", job: "Object", traits: ["nice"], icon: "ğŸ–¼ï¸" }, { name: "Plant", job: "Object", traits: ["green"], icon: "ğŸª´" }] },
            { clues: ["I am <b>in the living room</b>.", "I am <b>soft</b>.", "You can <b>sit on me</b>."], answer: "Sofa", profiles: [{ name: "Sofa", job: "Object", traits: ["living room", "soft"], icon: "ğŸ›‹ï¸" }, { name: "Bed", job: "Object", traits: ["sleep"], icon: "ğŸ›ï¸" }, { name: "Chair", job: "Object", traits: ["hard"], icon: "ğŸª‘" }, { name: "Desk", job: "Object", traits: ["study"], icon: "ğŸ“–" }] },
            { clues: ["I am <b>near the desk</b>.", "I have <b>trash</b> in me."], answer: "Trash can", profiles: [{ name: "Trash can", job: "Object", traits: ["trash", "near desk"], icon: "ğŸ—‘ï¸" }, { name: "Plant", job: "Object", traits: ["green"], icon: "ğŸª´" }, { name: "Water bottle", job: "Object", traits: ["water"], icon: "ğŸ¼" }, { name: "Computer", job: "Object", traits: ["study"], icon: "ğŸ’»" }] },
            { clues: ["I am <b>on the floor</b>.", "I am <b>soft</b>.", "I am <b>colorful</b>."], answer: "Rug", profiles: [{ name: "Rug", job: "Object", traits: ["floor", "soft"], icon: "ğŸ§¶" }, { name: "Bed", job: "Object", traits: ["sleep"], icon: "ğŸ›ï¸" }, { name: "Desk", job: "Object", traits: ["study"], icon: "ğŸ“–" }, { name: "Sofa", job: "Object", traits: ["sit"], icon: "ğŸ›‹ï¸" }] },
            { clues: ["I am <b>beside the computer</b>.", "I am for <b>listening</b>."], answer: "Speaker", profiles: [{ name: "Speaker", job: "Object", traits: ["music", "listening"], icon: "ğŸ”Š" }, { name: "Computer", job: "Object", traits: ["study"], icon: "ğŸ’»" }, { name: "Clock", job: "Object", traits: ["time"], icon: "â°" }, { name: "Lamp", job: "Object", traits: ["bright"], icon: "ğŸ’¡" }] },
            { clues: ["I am <b>on the desk</b>.", "I can <b>tell you the words</b>.", "I am an <b>English book</b>."], answer: "Dictionary", profiles: [{ name: "Dictionary", job: "Object", traits: ["book", "words"], icon: "ğŸ“–" }, { name: "Computer", job: "Object", traits: ["screen"], icon: "ğŸ’»" }, { name: "Photo", job: "Object", traits: ["nice"], icon: "ğŸ–¼ï¸" }, { name: "Clock", job: "Object", traits: ["time"], icon: "â°" }] },
            { clues: ["I am <b>in the kitchen</b>.", "I am <b>cold</b>.", "I keep <b>food fresh</b>."], answer: "Fridge", profiles: [{ name: "Fridge", job: "Object", traits: ["cold", "fresh"], icon: "ğŸ§Š" }, { name: "Sofa", job: "Object", traits: ["soft"], icon: "ğŸ›‹ï¸" }, { name: "Bed", job: "Object", traits: ["sleep"], icon: "ğŸ›ï¸" }, { name: "Desk", job: "Object", traits: ["study"], icon: "ğŸ“–" }] },
            { clues: ["I am <b>on the wall</b>.", "I am <b>round</b>.", "I can <b>tell you the time</b>."], answer: "Clock", profiles: [{ name: "Clock", job: "Object", traits: ["time", "round"], icon: "â°" }, { name: "Photo", job: "Object", traits: ["nice"], icon: "ğŸ–¼ï¸" }, { name: "Mirror", job: "Object", traits: ["bathroom"], icon: "ğŸª" }, { name: "Map", job: "Object", traits: ["colors"], icon: "ğŸ—ºï¸" }] }
        ],
        unit6: [
            { clues: ["There are <b>many trees</b>.", "It is very <b>quiet</b>."], answer: "Forest", profiles: [{ name: "Forest", job: "Place", traits: ["many trees", "quiet"], icon: "ğŸŒ²" }, { name: "City", job: "Place", traits: ["big", "buildings"], icon: "ğŸ™ï¸" }, { name: "Village", job: "Place", traits: ["small", "houses"], icon: "ğŸ¡" }, { name: "Nature Park", job: "Place", traits: ["river", "mountain"], icon: "ğŸï¸" }] },
            { clues: ["There is <b>water</b>.", "There is a <b>bridge</b> over it."], answer: "River", profiles: [{ name: "River", job: "Place", traits: ["water", "bridge"], icon: "ğŸ’§" }, { name: "Lake", job: "Place", traits: ["water", "ducks"], icon: "ğŸŒŠ" }, { name: "Mountain", job: "Place", traits: ["high", "near lake"], icon: "â›°ï¸" }, { name: "Forest", job: "Place", traits: ["many trees", "quiet"], icon: "ğŸŒ²" }] },
            { clues: ["There are <b>ducks</b> on it.", "The water is <b>clean</b>."], answer: "Lake", profiles: [{ name: "Lake", job: "Place", traits: ["water", "ducks"], icon: "ğŸŒŠ" }, { name: "River", job: "Place", traits: ["water", "bridge"], icon: "ğŸ’§" }, { name: "Hill", job: "Place", traits: ["small mountain"], icon: "â›°ï¸" }, { name: "Village", job: "Place", traits: ["small", "houses"], icon: "ğŸ¡" }] },
            { clues: ["I am very <b>high</b>.", "I am <b>near the lake</b>."], answer: "Mountain", profiles: [{ name: "Mountain", job: "Place", traits: ["high", "near lake"], icon: "â›°ï¸" }, { name: "Hill", job: "Place", traits: ["small mountain"], icon: "â›°ï¸" }, { name: "Forest", job: "Place", traits: ["many trees", "quiet"], icon: "ğŸŒ²" }, { name: "Nature Park", job: "Place", traits: ["river", "mountain"], icon: "ğŸï¸" }] },
            { clues: ["I am a <b>small mountain</b>."], answer: "Hill", profiles: [{ name: "Hill", job: "Place", traits: ["small mountain"], icon: "â›°ï¸" }, { name: "Mountain", job: "Place", traits: ["high", "near lake"], icon: "â›°ï¸" }, { name: "Forest", job: "Place", traits: ["many trees", "quiet"], icon: "ğŸŒ²" }, { name: "Village", job: "Place", traits: ["small", "houses"], icon: "ğŸ¡" }] },
            { clues: ["I am <b>over the river</b>."], answer: "Bridge", profiles: [{ name: "Bridge", job: "Object", traits: ["over river"], icon: "ğŸŒ‰" }, { name: "Building", job: "Object", traits: ["tall", "city"], icon: "ğŸ¢" }, { name: "Path", job: "Object", traits: ["forest", "walk"], icon: "ğŸ›¤ï¸" }, { name: "Desk", job: "Object", traits: ["front of chair", "study"], icon: "ğŸ“–" }] },
            { clues: ["There are <b>small houses</b>.", "It is very <b>quiet</b>."], answer: "Village", profiles: [{ name: "Village", job: "Place", traits: ["small", "houses"], icon: "ğŸ¡" }, { name: "City", job: "Place", traits: ["big", "buildings"], icon: "ğŸ™ï¸" }, { name: "Nature Park", job: "Place", traits: ["river", "mountain"], icon: "ğŸï¸" }, { name: "Forest", job: "Place", traits: ["many trees", "quiet"], icon: "ğŸŒ²" }] },
            { clues: ["I am very <b>tall</b>.", "I am in the <b>city</b>."], answer: "Building", profiles: [{ name: "Building", job: "Object", traits: ["tall", "city"], icon: "ğŸ¢" }, { name: "Bridge", job: "Object", traits: ["over river"], icon: "ğŸŒ‰" }, { name: "Clock", job: "Object", traits: ["on the wall", "time"], icon: "â°" }, { name: "Computer", job: "Object", traits: ["on the desk", "study"], icon: "ğŸ’»" }] },
            { clues: ["There are <b>trees, flowers and birds</b>.", "It is very <b>beautiful</b>."], answer: "Nature Park", profiles: [{ name: "Nature Park", job: "Place", traits: ["beautiful", "trees"], icon: "ğŸï¸" }, { name: "Forest", job: "Place", traits: ["many trees", "quiet"], icon: "ğŸŒ²" }, { name: "Village", job: "Place", traits: ["small", "houses"], icon: "ğŸ¡" }, { name: "City", job: "Place", traits: ["big", "buildings"], icon: "ğŸ™ï¸" }] },
            { clues: ["I am in the <b>forest</b>.", "You can <b>walk</b> on me."], answer: "Path", profiles: [{ name: "Path", job: "Object", traits: ["forest", "walk"], icon: "ğŸ›¤ï¸" }, { name: "Bridge", job: "Object", traits: ["over river"], icon: "ğŸŒ‰" }, { name: "Desk", job: "Object", traits: ["front of chair", "study"], icon: "ğŸ“–" }, { name: "Bed", job: "Object", traits: ["bedroom", "sleep"], icon: "ğŸ›ï¸" }] },
            { clues: ["I am <b>big</b>.", "There are many <b>buildings</b>.", "There are many <b>people</b>."], answer: "City", profiles: [{ name: "City", job: "Place", traits: ["big", "buildings"], icon: "ğŸ™ï¸" }, { name: "Village", job: "Place", traits: ["small"], icon: "ğŸ¡" }, { name: "Forest", job: "Place", traits: ["trees"], icon: "ğŸŒ²" }, { name: "River", job: "Place", traits: ["water"], icon: "ğŸ’§" }] },
            { clues: ["I am <b>beautiful</b>.", "I am <b>red and yellow</b>.", "I smell <b>nice</b>."], answer: "Flower", profiles: [{ name: "Flower", job: "Object", traits: ["nice", "colorful"], icon: "ğŸŒ¸" }, { name: "Tree", job: "Object", traits: ["green"], icon: "ğŸŒ³" }, { name: "Grass", job: "Object", traits: ["green"], icon: "ğŸŒ±" }, { name: "Path", job: "Object", traits: ["walk"], icon: "ğŸ›¤ï¸" }] },
            { clues: ["I am <b>green</b>.", "I am <b>tall</b>.", "I live in the <b>forest</b>."], answer: "Tree", profiles: [{ name: "Tree", job: "Object", traits: ["green", "tall"], icon: "ğŸŒ³" }, { name: "Flower", job: "Object", traits: ["small"], icon: "ğŸŒ¸" }, { name: "Grass", job: "Object", traits: ["short"], icon: "ğŸŒ±" }, { name: "Building", job: "Object", traits: ["tall"], icon: "ğŸ¢" }] },
            { clues: ["I am <b>green</b>.", "I am <b>short</b>.", "I am <b>everywhere</b> in the park."], answer: "Grass", profiles: [{ name: "Grass", job: "Object", traits: ["green", "short"], icon: "ğŸŒ±" }, { name: "Tree", job: "Object", traits: ["tall"], icon: "ğŸŒ³" }, { name: "Flower", job: "Object", traits: ["colorful"], icon: "ğŸŒ¸" }, { name: "Path", job: "Object", traits: ["walk"], icon: "ğŸ›¤ï¸" }] },
            { clues: ["I can <b>fly</b>.", "I can <b>sing</b>.", "I live in the <b>trees</b>."], answer: "Bird", profiles: [{ name: "Bird", job: "Animal", traits: ["fly", "sing"], icon: "ğŸ¦" }, { name: "Fish", job: "Animal", traits: ["swim"], icon: "ğŸŸ" }, { name: "Duck", job: "Animal", traits: ["water"], icon: "ğŸ¦†" }, { name: "Robot", job: "Machine", traits: ["clever"], icon: "ğŸ¤–" }] },
            { clues: ["I can <b>swim</b>.", "I live in the <b>lake</b>."], answer: "Fish", profiles: [{ name: "Fish", job: "Animal", traits: ["swim", "water"], icon: "ğŸŸ" }, { name: "Bird", job: "Animal", traits: ["fly"], icon: "ğŸ¦" }, { name: "Tree", job: "Object", traits: ["green"], icon: "ğŸŒ³" }, { name: "Path", job: "Object", traits: ["walk"], icon: "ğŸ›¤ï¸" }] },
            { clues: ["I am <b>over the lake</b>.", "You can <b>see the mountain</b> from me."], answer: "Bridge", profiles: [{ name: "Bridge", job: "Object", traits: ["lake", "view"], icon: "ğŸŒ‰" }, { name: "Building", job: "Object", traits: ["tall"], icon: "ğŸ¢" }, { name: "Path", job: "Object", traits: ["forest"], icon: "ğŸ›¤ï¸" }, { name: "Forest", job: "Place", traits: ["trees"], icon: "ğŸŒ²" }] },
            { clues: ["I am <b>high</b>.", "There are many <b>trees</b> on me."], answer: "Mountain", profiles: [{ name: "Mountain", job: "Place", traits: ["high", "trees"], icon: "â›°ï¸" }, { name: "Hill", job: "Place", traits: ["small"], icon: "â›°ï¸" }, { name: "Village", job: "Place", traits: ["houses"], icon: "ğŸ¡" }, { name: "City", job: "Place", traits: ["buildings"], icon: "ğŸ™ï¸" }] },
            { clues: ["I am a <b>place</b>.", "There are <b>many buildings and people</b>."], answer: "City", profiles: [{ name: "City", job: "Place", traits: ["big", "busy"], icon: "ğŸ™ï¸" }, { name: "Village", job: "Place", traits: ["small", "quiet"], icon: "ğŸ¡" }, { name: "Forest", job: "Place", traits: ["trees"], icon: "ğŸŒ²" }, { name: "Nature Park", job: "Place", traits: ["beautiful"], icon: "ğŸï¸" }] }
        ]
    };

    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // æ ¸å¿ƒé€»è¾‘ï¼šä» 6 ä¸ªå•å…ƒå„éšæœºæŠ½å– 1 é¢˜
    function generateLevels() {
        console.log("Generating new levels for session...");
        const units = ['unit1', 'unit2', 'unit3', 'unit4', 'unit5', 'unit6'];
        const levels = [];
        units.forEach(unitKey => {
            const unitQuestions = bank[unitKey];
            const randomQuestion = unitQuestions[Math.floor(Math.random() * unitQuestions.length)];
            // æ·±æ‹·è´ä»¥é˜²å¹²æ‰°é¢˜åº“æ•°æ®
            levels.push(JSON.parse(JSON.stringify(randomQuestion)));
        });
        // æ‰“ä¹±å•å…ƒé¡ºåºï¼Œè®©æ¯æ¬¡è¿›å»çš„ç¬¬ä¸€å…³ä¹Ÿä¸ä¸€æ ·
        const shuffled = shuffle(levels);
        console.log("Selected units sequence:", shuffled.map(l => {
            // ç®€å•é€šè¿‡å†…å®¹ç‰¹å¾åˆ¤æ–­å±äºå“ªä¸ªå•å…ƒ
            if (l.answer.includes("Mr.") || l.answer.includes("Ms.") || l.answer.includes("Miss")) return "Unit 1";
            if (l.profiles[0].job === "Weekday" || l.profiles[0].job === "Activity") return "Unit 2";
            if (l.profiles[0].job === "Food" || l.profiles[0].job === "Drink" || l.profiles[0].job === "Fruit") return "Unit 3";
            if (l.profiles[0].job === "Ability") return "Unit 4";
            if (l.profiles[0].job === "Object") return "Unit 5";
            return "Unit 6";
        }));
        return shuffled;
    }

    let levels = generateLevels();
    let currentLevel = 0;
    let score = 0;
    const winModal = new bootstrap.Modal(document.getElementById('winModal'));

    // --- è¯­éŸ³å¼•æ“é€»è¾‘ (é€‚é…å®‰å“) ---
    let voiceUnlocked = localStorage.getItem('pep5_voice_unlocked') === 'true';
    let preferredVoice = null;
    let currentUtterance = null;
    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
    const isAndroid = /Android/.test(navigator.userAgent);

    function initVoices() {
        if (!('speechSynthesis' in window)) return;
        let voices = window.speechSynthesis.getVoices();
        const trySelectVoice = () => {
            voices = window.speechSynthesis.getVoices();
            if (voices.length > 0) {
                // æ¡Œé¢ç«¯æ’é”™ï¼šä¼˜å…ˆé€‰æ‹©æœ¬åœ°æœåŠ¡ (localService: true) çš„è¯­éŸ³åŒ…
                const localEnVoices = voices.filter(v => v.lang.startsWith('en') && v.localService === true);
                preferredVoice = localEnVoices.find(v => v.name.includes('Samantha')) ||
                                 localEnVoices.find(v => v.name.includes('Microsoft David')) ||
                                 localEnVoices.find(v => v.name.includes('English (United States)')) ||
                                 localEnVoices[0] ||
                                 voices.find(v => v.name.includes('Google US English')) ||
                                 voices.find(v => v.lang.startsWith('en'));
            }
        };
        if (voices.length === 0) {
            window.speechSynthesis.onvoiceschanged = () => {
                trySelectVoice();
            };
        } else {
            trySelectVoice();
        }
    }

    let errorCount = 0;
    const MAX_ERRORS = 2;

    function unlockVoice() {
        if ('speechSynthesis' in window) {
            window.speechSynthesis.resume();
            const msg = new SpeechSynthesisUtterance('Ready');
            msg.volume = 0.1;
            window.speechSynthesis.speak(msg);
        }
        voiceUnlocked = true;
        localStorage.setItem('pep5_voice_unlocked', 'true');
        const btn = document.getElementById('btn-unlock-audio');
        if (btn) {
            btn.innerHTML = 'âœ… è¯­éŸ³å·²å¼€å¯';
            btn.className = 'btn btn-success btn-sm rounded-pill btn-unlock-audio';
            setTimeout(() => btn.style.display = 'none', 1500);
        }
        initVoices();
    }

    let fallbackAudio = null;
    let speakTimeout = null;
    let checkSpeakingInterval = null;
    let lastSpeakId = 0; // ç”¨äºè¿½è¸ªæœ€æ–°çš„å‘éŸ³è¯·æ±‚ï¼Œé˜²æ­¢å¹¶å‘å†²çª

    // å…¨å±€ç‚¹å‡»å‘éŸ³ç›‘å¬
    document.addEventListener('click', (e) => {
        // ä»»ä½•ç‚¹å‡»éƒ½å°è¯•æ¢å¤è¯­éŸ³å¼•æ“
        if ('speechSynthesis' in window && window.speechSynthesis.paused) {
            window.speechSynthesis.resume();
        }

        // 1. æ¡ˆä»¶çº¿ç´¢æ–‡æœ¬
        const clueText = e.target.closest('.clue-text-content');
        if (clueText && !e.target.closest('.btn-play-clue')) {
            const btn = clueText.parentElement.querySelector('.btn-play-clue');
            if (btn) {
                const onclickAttr = btn.getAttribute('onclick');
                if (onclickAttr) {
                    const match = onclickAttr.match(/speak\(['"](.*)['"]\)/);
                    if (match && match[1]) {
                        const text = match[1].replace(/\\'/g, "'").replace(/\\"/g, '"');
                        speak(text);
                    }
                }
            }
        }
    });

    function speak(text) {
        if (!text) return;
        console.log("TTS Request:", text);
        
        // 1. å°è¯•è‡ªåŠ¨æ¢å¤è¯­éŸ³å¼•æ“
        if ('speechSynthesis' in window) {
            if (window.speechSynthesis.paused) {
                console.log("Resuming stalled speechSynthesis");
                window.speechSynthesis.resume();
            }
        }

        // å¦‚æœæœªè§£é”ï¼Œå°è¯•è‡ªåŠ¨è§£é”ï¼ˆç”±ç”¨æˆ·ç‚¹å‡»è§¦å‘ï¼‰
        if (!voiceUnlocked) {
            unlockVoice();
        }
        
        if (speakTimeout) {
            clearTimeout(speakTimeout);
            speakTimeout = null;
        }
        
        if (checkSpeakingInterval) {
            clearInterval(checkSpeakingInterval);
            checkSpeakingInterval = null;
        }

        // åœæ­¢ä¹‹å‰çš„ Fallback éŸ³é¢‘
        if (fallbackAudio) {
            try {
                fallbackAudio.pause();
                fallbackAudio.currentTime = 0;
            } catch (e) {}
            fallbackAudio = null;
        }

        // 2. ç”Ÿæˆæ–°çš„è¯·æ±‚ ID
        const currentId = ++lastSpeakId;

        const cleanText = text.replace(/<[^>]*>/g, '').trim(); // ç§»é™¤ HTML æ ‡ç­¾
        
        if ('speechSynthesis' in window) {
            // 3. ç«‹å³åœæ­¢å½“å‰å‘éŸ³
            try {
                if (window.speechSynthesis.speaking) {
                    window.speechSynthesis.cancel();
                }
            } catch (e) {}

            // é’ˆå¯¹ä¸åŒå¹³å°è®¾ç½®ä¸åŒçš„æ‰§è¡Œç­–ç•¥
            const delay = isAndroid ? 250 : 50;
            speakTimeout = setTimeout(() => {
                if (currentId === lastSpeakId) {
                    executeSpeak(cleanText, currentId);
                }
                speakTimeout = null;
            }, delay);
        } else {
            speakFallback(cleanText, currentId);
        }
    }

    function executeSpeak(text, requestId) {
        console.log("Executing WebSpeech:", text, "RequestID:", requestId);
        try {
            const utterance = new SpeechSynthesisUtterance(text);
            currentUtterance = utterance;
            utterance.lang = 'en-US';
            utterance.rate = 0.85;
            if (preferredVoice) utterance.voice = preferredVoice;

            utterance.onstart = () => {
                console.log("WebSpeech started:", requestId);
                if (requestId !== lastSpeakId) return;
                errorCount = 0; // æˆåŠŸå¼€å§‹ï¼Œé‡ç½®é”™è¯¯è®¡æ•°
                if (window.speechSynthesis.paused) window.speechSynthesis.resume();
            };
            utterance.onend = () => { 
                console.log("WebSpeech ended:", requestId);
                if (requestId !== lastSpeakId) return;
                currentUtterance = null; 
                if (checkSpeakingInterval) {
                    clearInterval(checkSpeakingInterval);
                    checkSpeakingInterval = null;
                }
            };
            utterance.onerror = (e) => { 
                console.error("WebSpeech Error:", e.error || e, "RequestID:", requestId);
                if (requestId !== lastSpeakId) return;
                currentUtterance = null; 
                if (checkSpeakingInterval) {
                    clearInterval(checkSpeakingInterval);
                    checkSpeakingInterval = null;
                }
                
                // æ ¸å¿ƒä¿®å¤ï¼šå¦‚æœé‡åˆ° interrupted æˆ– network é”™è¯¯ï¼Œä¸”é‡è¯•æ¬¡æ•°æœªè¶…é™ï¼Œå°è¯•æ¢ä¸€ä¸ªæœ¬åœ°è¯­éŸ³åŒ…
                if (e.error === 'interrupted' || e.error === 'network') {
                    errorCount++;
                    if (errorCount >= MAX_ERRORS) {
                        speakFallback(text, requestId);
                    } else {
                        const voices = window.speechSynthesis.getVoices();
                        const safeVoice = voices.find(v => v.localService && v.lang.startsWith('en') && v !== preferredVoice);
                        if (safeVoice) preferredVoice = safeVoice;
                        setTimeout(() => {
                            if (requestId === lastSpeakId) executeSpeak(text, requestId);
                        }, 100);
                    }
                } else if (e.error !== 'canceled') {
                    speakFallback(text, requestId);
                }
            };

            if (window.speechSynthesis.paused) {
                window.speechSynthesis.resume();
            }
            window.speechSynthesis.speak(utterance);
            
            // ç›‘æ§ï¼šå¦‚æœ 2 ç§’åè¿˜æ²¡å¼€å§‹ï¼Œå¼ºåˆ¶ resume ä¸€æ¬¡
            setTimeout(() => {
                if (requestId === lastSpeakId && currentUtterance && !window.speechSynthesis.speaking) {
                    console.log("Stuck detected, forcing resume...");
                    window.speechSynthesis.resume();
                }
            }, 2000);

            if (isAndroid) {
                checkSpeakingInterval = setInterval(() => {
                    if (requestId !== lastSpeakId) {
                        clearInterval(checkSpeakingInterval);
                        return;
                    }
                    if (window.speechSynthesis.speaking) {
                        if (window.speechSynthesis.paused) {
                            window.speechSynthesis.resume();
                        }
                    } else {
                        clearInterval(checkSpeakingInterval);
                        checkSpeakingInterval = null;
                    }
                }, 2000);
            }
        } catch (e) {
            speakFallback(text, requestId);
        }
    }

    function speakFallback(text, requestId) {
        if (!text) return;
        console.log("Using Fallback TTS:", text, "RequestID:", requestId);
        
        // å¦‚æœè¯·æ±‚ ID ä¸æ˜¯æœ€æ–°çš„ï¼Œæ”¾å¼ƒæ’­æ”¾
        if (requestId !== undefined && requestId !== lastSpeakId) return;

        if (fallbackAudio) {
            try {
                fallbackAudio.pause();
                fallbackAudio.currentTime = 0;
            } catch (e) {}
            fallbackAudio = null;
        }
        
        const url = `https://dict.youdao.com/dictvoice?audio=${encodeURIComponent(text)}&type=2`;
        try {
            fallbackAudio = new Audio(url);
            fallbackAudio.play().catch(e => {
                console.error("Fallback audio failed", e);
                // å¦‚æœè‡ªåŠ¨è§£é”å¤±è´¥ï¼Œæ‰æ˜¾ç¤ºæŒ‰é’®
                if (!voiceUnlocked) {
                    const btn = document.getElementById('btn-unlock-audio');
                    if (btn) btn.style.display = 'block';
                }
            });
        } catch (e) {
            console.error("Fallback audio creation failed", e);
        }
    }

    window.addEventListener('DOMContentLoaded', () => {
        if (voiceUnlocked) {
            const btn = document.getElementById('btn-unlock-audio');
            if (btn) btn.style.display = 'none';
            initVoices();
        }
    });

    function loadLevel() {
        const level = levels[currentLevel];
        document.getElementById('levelNum').innerText = currentLevel + 1;
        
        // Load Clues
        const clueDiv = document.getElementById('clueContent');
        clueDiv.innerHTML = '';
        level.clues.forEach((clue, index) => {
            const div = document.createElement('div');
            div.className = 'clue-item animate__animated animate__fadeIn';
            div.style.animationDelay = (index * 0.3) + 's';
            
            // å¤„ç† clue æ–‡æœ¬ï¼ˆå¯èƒ½åŒ…å« HTML æ ‡ç­¾å¦‚ <b>ï¼‰
            div.innerHTML = `
                <span class="clue-text-content">â€¢ ${clue}</span>
                <button class="btn-play-clue" onclick="speak('${clue.replace(/'/g, "\\'")}')">ğŸ”Š</button>
            `;
            clueDiv.appendChild(div);
        });

        // Load Cards (éšæœºæ‰“ä¹±é€‰é¡¹é¡ºåº)
        const grid = document.getElementById('cardGrid');
        grid.innerHTML = '';
        const shuffledProfiles = shuffle([...level.profiles]);
        shuffledProfiles.forEach((profile, index) => {
            const col = document.createElement('div');
            col.className = 'col-6 col-lg-3';
            col.innerHTML = `
                <div class="profile-card animate__animated animate__zoomIn" style="animation-delay: ${0.1 * index}s" onclick="checkAnswer('${profile.name}', this)">
                    <div class="avatar">${profile.icon}</div>
                    <h5 class="mb-1">${profile.name}</h5>
                    <p class="text-muted small mb-2">${profile.job}</p>
                    <div class="traits">
                        ${profile.traits.map(t => `<span class="trait-badge">${t}</span>`).join('')}
                    </div>
                </div>
            `;
            grid.appendChild(col);
        });
        
        document.getElementById('feedback').innerText = '';
    }

    function checkAnswer(name, element) {
        const level = levels[currentLevel];
        if (name === level.answer) {
            score += 20;
            document.getElementById('score').innerText = score;
            document.getElementById('feedback').innerHTML = '<span class="text-success">âœ¨ å¤ªæ£’äº†ï¼æ¨ç†æ­£ç¡®ï¼</span>';
            element.classList.add('selected');
            
            setTimeout(() => {
                currentLevel++;
                if (currentLevel < levels.length) {
                    loadLevel();
                } else {
                    document.getElementById('finalScore').innerText = score;
                    winModal.show();
                }
            }, 1500);
        } else {
            document.getElementById('feedback').innerHTML = '<span class="text-danger">âŒ è¿™é‡Œçš„çº¿ç´¢å¥½åƒå¯¹ä¸ä¸Šï¼Œå†æƒ³æƒ³ï¼Ÿ</span>';
            element.classList.add('eliminated');
            score = Math.max(0, score - 5);
            document.getElementById('score').innerText = score;
        }
    }

    // Start
    window.onload = loadLevel;
</script>

</body>
</html>