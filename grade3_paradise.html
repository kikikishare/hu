<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…ƒæ°”æ£®æ—Â·å…¨ç§‘æ¢¦å·¥å‚ - Catherineçš„è‹±è¯­è¯¾å ‚</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        :root {
            --primary-bg: #FFF9C4;
            --card-cn: #FFCDD2; /* Chinese */
            --card-en: #C8E6C9; /* English */
            --card-math: #BBDEFB; /* Math */
            --card-sci: #E1BEE7; /* Science */
        }

        body {
            background-color: var(--primary-bg);
            font-family: 'PingFang SC', sans-serif;
            padding-bottom: 50px;
        }

        .hero-section {
            background: linear-gradient(135deg, #FFEB3B, #FBC02D);
            padding: 60px 0;
            text-align: center;
            border-bottom-left-radius: 50% 20px;
            border-bottom-right-radius: 50% 20px;
            margin-bottom: 40px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .subject-card {
            border-radius: 25px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
            border: none;
            height: 100%;
            box-shadow: 0 8px 20px rgba(0,0,0,0.05);
        }

        .subject-card:hover {
            transform: scale(1.05) translateY(-5px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.1);
        }

        .card-cn { background-color: var(--card-cn); }
        .card-en { background-color: var(--card-en); }
        .card-math { background-color: var(--card-math); }
        .card-sci { background-color: var(--card-sci); }

        .subject-icon {
            font-size: 4rem;
            margin-bottom: 15px;
            display: block;
        }

        .btn-back {
            position: absolute;
            top: 20px;
            left: 20px;
            background: white;
            border-radius: 50px;
            padding: 5px 20px;
            text-decoration: none;
            color: #333;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        /* Mini Game Overlay */
        .game-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 2000;
            color: white;
            padding: 20px;
            overflow-y: auto;
        }

        .game-content {
            max-width: 600px;
            margin: 50px auto;
            background: white;
            color: #333;
            padding: 30px;
            border-radius: 30px;
            text-align: center;
        }

        .option-btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #eee;
            border-radius: 15px;
            background: white;
            font-size: 1.1rem;
            transition: all 0.2s;
            cursor: pointer;
        }

        .option-btn:hover {
            background: #f8f9fa;
            border-color: #FBC02D;
        }

        .score-badge {
            font-size: 1.5rem;
            color: #FBC02D;
            font-weight: bold;
        }

        /* Non-blocking feedback */
        .feedback-toast {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px 30px;
            border-radius: 50px;
            color: white;
            font-weight: bold;
            display: none;
            z-index: 3000;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .feedback-success { background: #66BB6A; }
        .feedback-error { background: #EF5350; }

        .reading-text {
            background: #fff9c4;
            padding: 15px;
            border-radius: 10px;
            font-style: italic;
            margin-bottom: 20px;
            text-align: left;
            border-left: 5px solid #fbc02d;
        }
    </style>
</head>
<body>

<a href="index.html" class="btn-back">â† è¿”å›é¦–é¡µ</a>

<div id="feedbackToast" class="feedback-toast animate__animated"></div>

<div class="hero-section animate__animated animate__fadeIn">
    <h1 class="display-4 fw-bold">ğŸŒ³ å…ƒæ°”æ£®æ—</h1>
    <p class="lead">å…¨ç§‘æ¢¦å·¥å‚ï¼Œå¼€å¯æ™ºæ…§å†’é™©ï¼</p>
</div>

<div class="container">
    <div class="row g-4">
        <!-- è¯­æ–‡ -->
        <div class="col-md-3">
            <div class="subject-card card-cn animate__animated animate__fadeInUp" onclick="startChallenge('cn')">
                <span class="subject-icon">ğŸ®</span>
                <h3>è¶£å‘³è¯­æ–‡</h3>
                <p>å¤è¯—è¯ã€æˆè¯­æ¥é¾™å¤§é—¯å…³</p>
                <button class="btn btn-light rounded-pill">å¼€å§‹æŒ‘æˆ˜</button>
            </div>
        </div>
        <!-- è‹±è¯­ -->
        <div class="col-md-3">
            <div class="subject-card card-en animate__animated animate__fadeInUp animate__delay-1s" onclick="startChallenge('en')">
                <span class="subject-icon">ğŸ”¤</span>
                <h3>å¿«ä¹è‹±è¯­</h3>
                <p>å­—æ¯ã€å•è¯å¤§å˜èº«</p>
                <button class="btn btn-light rounded-pill">å¼€å§‹æŒ‘æˆ˜</button>
            </div>
        </div>
        <!-- æ•°å­¦ -->
        <div class="col-md-3">
            <div class="subject-card card-math animate__animated animate__fadeInUp animate__delay-2s" onclick="startChallenge('math')">
                <span class="subject-icon">ğŸ§®</span>
                <h3>é­”åŠ›æ•°å­¦</h3>
                <p>å£ç®—ã€é€»è¾‘æ•°å­—è¿·å®«</p>
                <button class="btn btn-light rounded-pill">å¼€å§‹æŒ‘æˆ˜</button>
            </div>
        </div>
        <!-- ç§‘å­¦ -->
        <div class="col-md-3">
            <div class="subject-card card-sci animate__animated animate__fadeInUp animate__delay-3s" onclick="startChallenge('sci')">
                <span class="subject-icon">ğŸ§ª</span>
                <h3>ç§‘å­¦å¥¥ç§˜</h3>
                <p>è‡ªç„¶ã€å®‡å®™ã€å¥‡å¦™å®éªŒ</p>
                <button class="btn btn-light rounded-pill">å¼€å§‹æŒ‘æˆ˜</button>
            </div>
        </div>
    </div>
</div>

<!-- Game Overlay -->
<div id="gameOverlay" class="game-overlay">
    <div class="game-content">
        <div class="d-flex justify-content-between mb-3">
            <span id="gameTitle" class="h4">æŒ‘æˆ˜å¼€å§‹</span>
            <button class="btn-close" onclick="closeGame()"></button>
        </div>
        <div id="questionContainer">
            <p id="questionText" class="h5 mb-4"></p>
            <div id="options"></div>
        </div>
        <div id="resultArea" style="display:none">
            <h2 class="mb-4">ğŸ‰ æ¢é™©æˆåŠŸï¼</h2>
            <p class="lead">ä½ åœ¨æ¢¦å·¥å‚çš„å¾—åˆ†æ˜¯ï¼š<span id="finalScore" class="score-badge">0</span></p>
            <button class="btn btn-warning rounded-pill px-5" onclick="closeGame()">å›æ£®æ—</button>
        </div>
    </div>
</div>

<script>
    const questions = {
        cn: [
            { 
                type: 'text',
                q: "å¤è¯—è¯†è¶£ï¼šâ€˜æ±Ÿå—å¯é‡‡è²ï¼Œè²å¶ä½•ç”°ç”°â€™ä¸­ï¼Œâ€˜ç”°ç”°â€™å½¢å®¹çš„æ˜¯ä»€ä¹ˆï¼Ÿ", 
                a: ["è²å¶èŒ‚ç››çš„æ ·å­", "ç”°é‡é‡Œçš„åº„ç¨¼", "é‡‡è²äººçš„å¿ƒæƒ…"], 
                correct: 0 
            },
            { 
                type: 'text',
                q: "ã€Šå’é¹…ã€‹ï¼šâ€˜ç™½æ¯›æµ®ç»¿æ°´ï¼Œçº¢æŒæ‹¨æ¸…æ³¢â€™ä¸­ï¼Œâ€˜æ‹¨â€™å­—å†™å‡ºäº†é¹…åœ¨æ°´é‡Œå¹²ä»€ä¹ˆï¼Ÿ", 
                a: ["æ´—æ¾¡", "åˆ’æ°´", "æ‰é±¼"], 
                correct: 1 
            },
            { 
                type: 'text',
                q: "ã€Šé£ã€‹ï¼šâ€˜è§£è½ä¸‰ç§‹å¶ï¼Œèƒ½å¼€äºŒæœˆèŠ±â€™ä¸­çš„â€˜äºŒæœˆèŠ±â€™æŒ‡çš„æ˜¯å“ªä¸€ä¸ªå­£èŠ‚ï¼Ÿ", 
                a: ["ç§‹å¤©", "å¤å¤©", "æ˜¥å¤©"], 
                correct: 2 
            },
            {
                type: 'text',
                q: "åå¥æŒ‘æˆ˜ï¼šâ€˜å°‘å£®ä¸åŠªåŠ›ï¼Œè€å¤§å¾’ä¼¤æ‚²â€™å‡ºè‡ªå“ªé¦–è¯—ï¼Ÿ",
                a: ["ã€Šé•¿æ­Œè¡Œã€‹", "ã€Šæ±Ÿå—ã€‹", "ã€Šå’æŸ³ã€‹"],
                correct: 0
            }
        ],
        en: [
            { 
                type: 'reading',
                text: "Mary has art class on Tuesday. Her friend David is there too. They use many shapes to draw pictures. David uses circles and squares to draw a house and a dog.",
                q: "Dolphin Reader: When does Mary have art class?", 
                a: ["On Monday", "On Tuesday", "On Friday"], 
                correct: 1 
            },
            { 
                type: 'reading',
                text: "David is drawing. He uses a big circle for the sun. He uses a triangle for the roof of the house. He uses squares for the windows.",
                q: "Dolphin Reader: What shape does David use for the roof?", 
                a: ["Circle", "Square", "Triangle"], 
                correct: 2 
            },
            { 
                type: 'reading',
                text: "I have a friend. Her name is Lily. She is a thin girl. She likes reading books. She has a big cat. It's white and fat.",
                q: "ç»˜æœ¬é˜…è¯»ï¼šWhat color is Lily's cat?", 
                a: ["Thin", "White", "Fat"], 
                correct: 1 
            }
        ],
        math: [
            { 
                type: 'text',
                q: "é€»è¾‘æŒ‘æˆ˜ï¼šä¸€ä¸ªå°ç»„æœ‰8ä¸ªäººï¼Œæ¯ä¸¤ä¸ªäººæ¡ä¸€æ¬¡æ‰‹ï¼Œä¸€å…±è¦æ¡å‡ æ¬¡ï¼Ÿ", 
                a: ["8æ¬¡", "28æ¬¡", "16æ¬¡"], 
                correct: 1 
            },
            { 
                type: 'text',
                q: "æ‰¾è§„å¾‹ï¼š2, 4, 8, 16, ( )", 
                a: ["20", "24", "32"], 
                correct: 2 
            }
        ],
        sci: [
            { 
                type: 'text',
                q: "ç§‘å­¦å®éªŒï¼šåœ¨æ°´é‡ŒåŠ å…¥ä»€ä¹ˆï¼Œå¯ä»¥è®©é¸¡è›‹æµ®èµ·æ¥ï¼Ÿ", 
                a: ["ç™½ç³–", "é£Ÿç›", "é¢ç²‰"], 
                correct: 1 
            },
            { 
                type: 'text',
                q: "è‡ªç„¶å¸¸è¯†ï¼šä¸ºä»€ä¹ˆåŒ—æç†Šä¸æ€•å†·ï¼Ÿ", 
                a: ["å®ƒä»¬ç©¿äº†è¡£æœ", "åšåšçš„è„‚è‚ªå’Œæ¯›å‘", "å®ƒä»¬ä¼šç”Ÿç«"], 
                correct: 1 
            }
        ]
    };

    let currentSubject = '';
    let currentIdx = 0;
    let score = 0;

    function startChallenge(subject) {
        currentSubject = subject;
        currentIdx = 0;
        score = 0;
        const titles = { cn: 'ğŸ® è¯­æ–‡å¤§æŒ‘æˆ˜', en: 'ğŸ”¤ è‹±è¯­å¤§æŒ‘æˆ˜', math: 'ğŸ§® æ•°å­¦å¤§æŒ‘æˆ˜', sci: 'ğŸ§ª ç§‘å­¦å¤§æŒ‘æˆ˜' };
        document.getElementById('gameTitle').innerText = titles[subject];
        document.getElementById('gameOverlay').style.display = 'block';
        document.getElementById('questionContainer').style.display = 'block';
        document.getElementById('resultArea').style.display = 'none';
        showQuestion();
    }

    function showQuestion() {
        const qData = questions[currentSubject][currentIdx];
        const optionsDiv = document.getElementById('options');
        const container = document.getElementById('questionContainer');
        
        // Clear previous
        container.innerHTML = `<p id="questionText" class="h5 mb-4"></p><div id="options"></div>`;
        const qText = document.getElementById('questionText');
        const opts = document.getElementById('options');

        if (qData.type === 'reading') {
            const readingDiv = document.createElement('div');
            readingDiv.className = 'reading-text animate__animated animate__fadeIn';
            readingDiv.innerText = qData.text;
            container.insertBefore(readingDiv, qText);
        }

        qText.innerText = qData.q;
        qData.a.forEach((opt, i) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn animate__animated animate__fadeInUp';
            btn.style.animationDelay = (i * 0.1) + 's';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(i);
            opts.appendChild(btn);
        });
    }

    function showToast(msg, isSuccess) {
        const toast = document.getElementById('feedbackToast');
        toast.innerText = msg;
        toast.className = `feedback-toast animate__animated animate__fadeInDown ${isSuccess ? 'feedback-success' : 'feedback-error'}`;
        toast.style.display = 'block';
        
        setTimeout(() => {
            toast.className = `feedback-toast animate__animated animate__fadeOutUp ${isSuccess ? 'feedback-success' : 'feedback-error'}`;
            setTimeout(() => { toast.style.display = 'none'; }, 500);
        }, 1500);
    }

    function checkAnswer(idx) {
        const qData = questions[currentSubject][currentIdx];
        if (idx === qData.correct) {
            score += 50;
            showToast("âœ¨ å¤ªæ£’äº†ï¼æ¢é™©å€¼ +50", true);
        } else {
            showToast("âŒ çº¿ç´¢æ‰¾é”™å•¦ï¼Œå†è§‚å¯Ÿä¸€ä¸‹ï¼", false);
        }
        
        setTimeout(() => {
            currentIdx++;
            if (currentIdx < questions[currentSubject].length) {
                showQuestion();
            } else {
                showResult();
            }
        }, 1000);
    }

    function showResult() {
        document.getElementById('questionContainer').style.display = 'none';
        document.getElementById('resultArea').style.display = 'block';
        document.getElementById('finalScore').innerText = score;
    }

    function closeGame() {
        document.getElementById('gameOverlay').style.display = 'none';
    }
</script>

</body>
</html>
